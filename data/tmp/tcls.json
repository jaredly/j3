{"map":{"0":{"type":"list","values":[6,7],"loc":0},"6":{"type":"identifier","text":"show-pretty","loc":6},"7":{"type":"identifier","text":"10","loc":7},"8":{"type":"list","values":[10,11,12,14],"loc":8},"10":{"type":"identifier","text":"defn","loc":10},"11":{"type":"identifier","text":"one","loc":11},"12":{"type":"array","values":[13],"loc":12},"13":{"type":"identifier","text":"x","loc":13},"14":{"type":"list","values":[15,16],"loc":14},"15":{"type":"identifier","text":"show-pretty","loc":15},"16":{"type":"identifier","text":"x","loc":16},"17":{"type":"list","values":[19,20,21,202],"loc":17},"19":{"type":"identifier","text":"defn","loc":19},"20":{"type":"identifier","text":"two","loc":20},"21":{"type":"array","values":[22,200],"loc":21},"22":{"type":"identifier","text":"x","loc":22},"23":{"type":"list","values":[24,25],"loc":23},"24":{"type":"identifier","text":"show","loc":24},"25":{"type":"identifier","text":"x","loc":25},"27":{"type":"list","values":[28,29,23],"loc":27},"28":{"type":"identifier","text":",","loc":28},"29":{"type":"list","values":[30,31,36],"loc":29},"30":{"type":"identifier","text":"map","loc":30},"31":{"type":"identifier","text":"show","loc":31},"36":{"type":"identifier","text":"x","loc":36},"40":{"type":"list","values":[42,43,44,48],"loc":40},"42":{"type":"identifier","text":"defn","loc":42},"43":{"type":"identifier","text":"map","loc":43},"44":{"type":"array","values":[46,47],"loc":44},"46":{"type":"identifier","text":"f","loc":46},"47":{"type":"identifier","text":"x","loc":47},"48":{"type":"list","values":[49,50,51,52,53,59],"loc":48},"49":{"type":"identifier","text":"match","loc":49},"50":{"type":"identifier","text":"x","loc":50},"51":{"type":"array","values":[],"loc":51},"52":{"type":"array","values":[],"loc":52},"53":{"type":"array","values":[54,58],"loc":53},"54":{"type":"identifier","text":"one","loc":54},"55":{"type":"identifier","text":"rest","loc":55},"58":{"type":"spread","contents":55,"loc":58},"59":{"type":"array","values":[60,66],"loc":59},"60":{"type":"list","values":[61,62],"loc":60},"61":{"type":"identifier","text":"f","loc":61},"62":{"type":"identifier","text":"one","loc":62},"63":{"type":"list","values":[67,68,69],"loc":63},"66":{"type":"spread","contents":63,"loc":66},"67":{"type":"identifier","text":"map","loc":67},"68":{"type":"identifier","text":"f","loc":68},"69":{"type":"identifier","text":"rest","loc":69},"73":{"type":"list","values":[188,189],"loc":73},"84":{"type":"list","values":[85,86,87,73],"loc":84},"85":{"type":"identifier","text":"defn","loc":85},"86":{"type":"identifier","text":"x","loc":86},"87":{"type":"array","values":[89],"loc":87},"89":{"type":"identifier","text":"z","loc":89},"94":{"type":"list","values":[96,98,99,110],"loc":94},"96":{"type":"identifier","text":"defn","loc":96},"98":{"type":"identifier","text":"a1","loc":98},"99":{"type":"array","values":[100,101,102],"loc":99},"100":{"type":"identifier","text":"a","loc":100},"101":{"type":"identifier","text":"b","loc":101},"102":{"type":"identifier","text":"c","loc":102},"110":{"type":"list","values":[111,112],"loc":110},"111":{"type":"identifier","text":",","loc":111},"112":{"type":"list","values":[113,114,115],"loc":112},"113":{"type":"identifier","text":">","loc":113},"114":{"type":"identifier","text":"a","loc":114},"115":{"type":"identifier","text":"b","loc":115},"116":{"type":"comment-node","loc":116,"contents":103},"117":{"type":"list","values":[119,120],"loc":117},"119":{"type":"identifier","text":"show","loc":119},"120":{"type":"identifier","text":"1","loc":120},"121":{"type":"list","values":[123,124],"loc":121},"123":{"type":"identifier","text":"show","loc":123},"124":{"type":"list","values":[125,126],"loc":124},"125":{"type":"identifier","text":"some","loc":125},"126":{"type":"string","first":166,"templates":[],"loc":126},"127":{"type":"list","values":[129,131,134,137],"loc":127},"129":{"type":"identifier","text":"deftype","loc":129},"131":{"type":"list","values":[132,133],"loc":131},"132":{"type":"identifier","text":"option","loc":132},"133":{"type":"identifier","text":"a","loc":133},"134":{"type":"list","values":[135,136],"loc":134},"135":{"type":"identifier","text":"some","loc":135},"136":{"type":"identifier","text":"a","loc":136},"137":{"type":"list","values":[138],"loc":137},"138":{"type":"identifier","text":"none","loc":138},"140":{"type":"list","values":[144,145],"loc":140},"144":{"type":"identifier","text":"show","loc":144},"145":{"type":"array","values":[167],"loc":145},"149":{"type":"list","values":[151,168,169],"loc":149},"151":{"type":"identifier","text":"<","loc":151},"155":{"type":"list","values":[157,158],"loc":155},"157":{"type":"identifier","text":"<","loc":157},"158":{"type":"list","values":[159,170,172],"loc":158},"159":{"type":"identifier","text":",","loc":159},"166":{"type":"stringText","loc":166,"text":"lol what is this"},"167":{"type":"identifier","text":"true","loc":167},"168":{"type":"identifier","text":"true","loc":168},"169":{"type":"identifier","text":"false","loc":169},"170":{"type":"string","first":171,"templates":[],"loc":170},"171":{"type":"stringText","loc":171,"text":""},"172":{"type":"string","first":173,"templates":[],"loc":172},"173":{"type":"stringText","loc":173,"text":""},"188":{"type":"identifier","text":"<","loc":188},"189":{"type":"list","values":[190,191,192],"loc":189},"190":{"type":"identifier","text":",","loc":190},"191":{"type":"string","first":193,"templates":[],"loc":191},"192":{"type":"identifier","text":"z","loc":192},"193":{"type":"stringText","loc":193,"text":""},"198":{"type":"rich-text","contents":[{"id":"d9239310-6ac3-420f-82f1-b54e9ef5f5c0","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"so, this should turn into ","styles":{}},{"type":"text","text":"(defn two [show-a x y] (, (map (tcls show show-a) x) ((tcls show (show-array show-a)) x)))","styles":{"code":true}}],"children":[]},{"id":"8e4a191d-325d-4256-b966-839a64c27291","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"right? tcls ... um lol it needs kind-level polymorphism? so we won't do that. we could ... do ","styles":{}},{"type":"text","text":"(.show show-a)","styles":{"code":true}},{"type":"text","text":", if we had a record type.","styles":{}}],"children":[]},{"id":"d54f08c1-fb3a-42fb-8d10-02ea9b6b92a6","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Or ... if there was a ","styles":{}},{"type":"text","text":"show_impl","styles":{"code":true}},{"type":"text","text":" function of type ","styles":{}},{"type":"text","text":"(fn [(show-map a) a] string)","styles":{"code":true}},{"type":"text","text":".","styles":{}}],"children":[]},{"id":"3a938893-26ec-4f13-9692-53b06d6be703","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"So, for every class ","styles":{}},{"type":"text","text":"baz","styles":{"code":true}},{"type":"text","text":", with methods ","styles":{}},{"type":"text","text":"hi","styles":{"code":true}},{"type":"text","text":" and ","styles":{}},{"type":"text","text":"bye","styles":{"code":true}},{"type":"text","text":", we produce ","styles":{}},{"type":"text","text":"hi!impl","styles":{"code":true}},{"type":"text","text":", ","styles":{}},{"type":"text","text":"bye!impl","styles":{"code":true}},{"type":"text","text":", and the type ","styles":{}},{"type":"text","text":"baz-map","styles":{"code":true}},{"type":"text","text":".","styles":{}}],"children":[]},{"id":"b16c6297-48b7-4883-b9f1-6e902a76c402","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Like, so I feel like it would be pretty nice if ... I could do the source transformation, and that ... would help me have confidence that my implementation was correct? Because I could do type checking on it afterwards? idk though it gets weird... maybe I'll pass on that actually.","styles":{}}],"children":[]},{"id":"f2647e52-c26c-4809-9839-e75f14b19348","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Just do the generation.","styles":{}}],"children":[]},{"id":"3c80cfa4-cb79-48db-a28a-60ecf4bf03aa","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Ok, due to the way polymorphism works, I think I can get away with frontloading all of the ","styles":{}},{"type":"text","text":"tcls-map","styles":{"code":true}},{"type":"text","text":"s. So if there are multiple type class preds at play, I stick them all as a bunch of first arguments to the function.","styles":{}}],"children":[]},{"id":"183250d4-62af-48c2-aa26-c98f5865f54e","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Honestly they don't have to be curried, either. ","styles":{}},{"type":"text","text":"two(show_a, x)(y)","styles":{"code":true}},{"type":"text","text":" is fine.","styles":{}}],"children":[]},{"id":"87c0084e-19d9-445e-aa3f-6d8a5bdb3c40","type":"paragraph","props":{"textColor":"default","backgroundColor":"default","textAlignment":"left"},"content":[{"type":"text","text":"Soo these predicates. It looks like they're restricted to having a basic type ... well maybe not, it can be an applied type, but only if it's a type class. Like it could be something like ","styles":{}},{"type":"text","text":"(a b) E ord","styles":{"code":true}},{"type":"text","text":". ","styles":{}}],"children":[]}],"loc":198},"200":{"type":"identifier","text":"y","loc":200},"202":{"type":"list","values":[203,204,27],"loc":202},"203":{"type":"identifier","text":",","loc":203},"204":{"type":"list","values":[205,206],"loc":204},"205":{"type":"identifier","text":"show","loc":205},"206":{"type":"identifier","text":"y","loc":206},"216":{"type":"list","values":[218,219,220,248],"loc":216},"218":{"type":"identifier","text":"defn","loc":218},"219":{"type":"identifier","text":"z","loc":219},"220":{"type":"array","values":[221],"loc":220},"221":{"type":"identifier","text":"y","loc":221},"225":{"type":"list","values":[229,230],"loc":225},"229":{"type":"identifier","text":"<","loc":229},"230":{"type":"list","values":[231,232],"loc":230},"231":{"type":"identifier","text":"return","loc":231},"232":{"type":"string","first":234,"templates":[],"loc":232},"233":{"type":"stringText","loc":233,"text":""},"234":{"type":"stringText","loc":234,"text":""},"239":{"type":"list","values":[266,267,275],"loc":239},"248":{"type":"list","values":[249,251,263],"loc":248},"249":{"type":"identifier","text":"let","loc":249},"251":{"type":"array","values":[252,225,258,259],"loc":251},"252":{"type":"identifier","text":"m","loc":252},"254":{"type":"identifier","text":",","loc":254},"258":{"type":"identifier","text":"n","loc":258},"259":{"type":"list","values":[260,261],"loc":259},"260":{"type":"identifier","text":"return","loc":260},"261":{"type":"identifier","text":"1","loc":261},"263":{"type":"list","values":[254,264,265],"loc":263},"264":{"type":"identifier","text":"m","loc":264},"265":{"type":"identifier","text":"n","loc":265},"266":{"type":"identifier","text":"let","loc":266},"267":{"type":"array","values":[268,272],"loc":267},"268":{"type":"list","values":[269,270,271],"loc":268},"269":{"type":"identifier","text":",","loc":269},"270":{"type":"identifier","text":"_","loc":270},"271":{"type":"identifier","text":"what","loc":271},"272":{"type":"list","values":[273,274],"loc":272},"273":{"type":"identifier","text":"z","loc":273},"274":{"type":"identifier","text":"1","loc":274},"275":{"type":"list","values":[276,277,278,281,282,283],"loc":275},"276":{"type":"identifier","text":"match","loc":276},"277":{"type":"identifier","text":"what","loc":277},"278":{"type":"list","values":[279,280],"loc":278},"279":{"type":"identifier","text":"some","loc":279},"280":{"type":"identifier","text":"a","loc":280},"281":{"type":"identifier","text":"a","loc":281},"282":{"type":"identifier","text":"_","loc":282},"283":{"type":"identifier","text":"0","loc":283},"284":{"type":"list","values":[286,287,288,290],"loc":284},"286":{"type":"identifier","text":"defn","loc":286},"287":{"type":"identifier","text":"nested-pred","loc":287},"288":{"type":"array","values":[289],"loc":288},"289":{"type":"identifier","text":"x","loc":289},"290":{"type":"list","values":[291,292],"loc":290},"291":{"type":"identifier","text":"<","loc":291},"292":{"type":"list","values":[293,294],"loc":292},"293":{"type":"identifier","text":"return","loc":293},"294":{"type":"string","first":295,"templates":[],"loc":294},"295":{"type":"stringText","loc":295,"text":""},"296":{"type":"identifier","text":"hello","loc":296},"300":{"type":"list","values":[302,303,304,306],"loc":300},"302":{"type":"identifier","text":"defn","loc":302},"303":{"type":"identifier","text":"one","loc":303},"304":{"type":"array","values":[305],"loc":304},"305":{"type":"identifier","text":"x","loc":305},"306":{"type":"list","values":[311,312],"loc":306},"311":{"type":"identifier","text":"f","loc":311},"312":{"type":"identifier","text":"s","loc":312},"313":{"type":"list","values":[315,316,319],"loc":313},"315":{"type":"identifier","text":"definstance","loc":315},"316":{"type":"list","values":[317,318],"loc":316},"317":{"type":"identifier","text":"pretty","loc":317},"318":{"type":"list","values":[334,335,336],"loc":318},"319":{"type":"record","values":[320,321],"loc":319},"320":{"type":"identifier","text":"show-pretty","loc":320},"321":{"type":"list","values":[322,323,326],"loc":321},"322":{"type":"identifier","text":"fn","loc":322},"323":{"type":"array","values":[324],"loc":323},"324":{"type":"identifier","text":"x","loc":324},"326":{"type":"string","first":333,"templates":[],"loc":326},"333":{"type":"stringText","loc":333,"text":"hello"},"334":{"type":"identifier","text":",","loc":334},"335":{"type":"identifier","text":"int","loc":335},"336":{"type":"identifier","text":"string","loc":336},"-1":{"type":"list","values":[0],"loc":-1}},"root":-1,"meta":{},"history":[],"clipboard":[],"hover":[],"regs":{},"at":[{"start":[{"type":"card","idx":-1,"card":0},{"type":"ns","child":314,"idx":0},{"type":"ns-top","idx":314},{"idx":313,"type":"child","at":1},{"idx":316,"type":"child","at":1},{"idx":318,"type":"child","at":2},{"idx":336,"type":"subtext","at":6}]}],"cards":[{"path":[],"top":0}],"nsMap":{"0":{"id":0,"top":-1,"children":[1,9,314,41,18,301,199,74,217,236,95,128,141,297,150,156],"type":"normal"},"1":{"id":1,"top":0,"children":[],"type":"normal"},"9":{"type":"normal","top":8,"children":[],"id":9},"18":{"type":"normal","top":17,"children":[],"id":18},"41":{"type":"normal","top":40,"children":[],"id":41},"74":{"type":"normal","top":84,"children":[285],"id":74},"95":{"type":"normal","top":94,"children":[118],"id":95},"118":{"type":"normal","top":117,"children":[],"id":118},"122":{"type":"normal","top":121,"children":[],"id":122},"128":{"type":"normal","top":127,"children":[122],"id":128},"141":{"type":"normal","top":140,"children":[],"id":141},"150":{"type":"normal","top":149,"children":[],"id":150},"156":{"type":"normal","top":155,"children":[],"id":156},"199":{"type":"normal","top":198,"children":[],"id":199},"217":{"type":"normal","top":216,"children":[],"id":217},"236":{"type":"normal","top":239,"children":[],"id":236},"285":{"type":"normal","top":284,"children":[],"id":285},"297":{"type":"normal","top":296,"children":[],"id":297},"299":{"type":"normal","top":298,"children":[],"id":299,"collapsed":true},"301":{"type":"normal","top":300,"children":[],"id":301},"314":{"type":"normal","top":313,"children":[],"id":314}},"evaluator":["algw-tc.js","jcst.js","parse-self.js","self-1.js"],"highlight":[]}