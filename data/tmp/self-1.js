const $prelude = (() => {const evaluate = (node, scope) => {
  switch (node.type) {
    case 'eprim':
      return node[0][0]
    case 'estr':
      return slash(node[0]) + unwrapArray(node[1]).map(({0: exp, 1: suf}) => evaluate(exp, scope) + slash(suf)).join('')
    case 'evar':
      var name = sanitize(node[0])
      if (!Object.hasOwn(scope, name)) {
        throw new Error(`Unknown vbl: ${name}. ${Object.keys(scope).join(', ')}`)
      }
      return scope[name]
    case 'elambda':
      return v => evaluate(node[1], {...scope, [sanitize(node[0])]: v})
    case 'eapp':
      return evaluate(node[0], scope)(evaluate(node[1], scope))
    case 'elet':
      const init = evaluate(node[1], scope)
      return evaluate(node[2], {...scope, [sanitize(node[0])]: got})
    case 'ematch':
      const target = evaluate(node[0], scope)
      for (let {0: pat, 1: body} of unwrapArray(node[1])) {
        const got = evalPat(pat, target)
        if (got) {
          return evaluate(body, {...scope, ...got})
        }
      }
      throw new Error(`match failed (${node[2]}): ${JSON.stringify(target)}`)
    case 'equot':
      return node[0]
  }
  throw new Error(`cant evaluatoe ${node.type}`)
};

const evaluateStmt = (node, env) => {
  switch (node.type) {
    case 'sexpr': return evaluate(node[0], env)
    case 'sdef':
      const value = evaluate(node[1], env)
      env[sanitize(node[0])] = value
      return value
    case 'sdeftype':
      const res = {}
      unwrapArray(node[1]).forEach(({0: name, 1: args}) => {
        res[sanitize(name)] = env[sanitize(name)] = constrFn(name, args)
      })
      return res
  }
};

const unwrapArray = value => value.type === 'nil' ? [] : [value[0], ...unwrapArray(value[1])];

const constrFn = (name, args) => {
  const next = (args) => {
    if (args.type === 'nil') return values => ({type: name, ...values})
    return values => arg => next(args[1])([...values, arg])
  }
  return next(args)([])
};

const sanitize = (raw) => {
    for (let [key, val] of Object.entries(sanMap)) {
        raw = raw.replaceAll(key, val);
    }
    kwdRx.forEach(([rx, res]) => {
        raw = raw.replaceAll(rx, res);
    });
    return raw;
  };

const sanMap = {"-":"_","+":"$pl","*":"$ti","=":"$eq",">":"$gt","<":"$lt","'":"$qu","\"":"$dq",",":"$co","/":"$sl",";":"$semi","@":"$at","!":"$ex","|":"$bar","()":"$unit","?":"$qe","$":"$$"};

const evalPat = (node, v) => {
  switch (node.type) {
    case 'pany': return {}
    case 'pprim': return v === node[0][0] ? {} : null
    case 'pvar':
      return {[sanitize(node[0])]: v}
    case 'pcon':
      if (v.type === node[0]) {
        const args = unwrapArray(node[1])
        const scope = {}
        for (let i=0; i<args.length; i++) {
          const sub = evalPat(args[i], v[i])
          if (!sub) return
          Object.assign(scope, sub)
        }
        return scope
      }
  }
};

const kwdRx = [[/^case$/g, "$case"], [/^new$/g, "$new"], [/^var$/g, "$var"], [/^const$/g, "$const"], [/^let$/g, "$let"], [/^if$/g, "$if"], [/^else$/g, "$else"], [/^return$/g, "$return"], [/^super$/g, "$super"], [/^break$/g, "$break"], [/^while$/g, "$while"], [/^for$/g, "$for"], [/^default$/g, "$default"]];

const slash = (n) =>
    n.replaceAll(/\\./g, (m) => {
        if (m[1] === 'n') {
            return '\n';
        }
        if (m[1] === 't') {
            return '\t';
        }
        if (m[1] === 'r') {
            return '\r';
        }
        return m[1];
    });
return {evaluate,evaluateStmt,unwrapArray,constrFn,sanitize,sanMap,evalPat,kwdRx,slash}})();
Object.assign($env, $prelude);
const builtins = $env.evaluateStmt({"0":"builtins","1":{"0":"const sanMap = { '-': '_', '+': '$pl', '*': '$ti', '=': '$eq', \n'>': '$gt', '<': '$lt', \"'\": '$qu', '\"': '$dq', ',': '$co', '@': '$at', '/': '$sl'};\n\nconst kwds = 'case var else const let var new if return default break while for super';\nconst rx = [];\nkwds.split(' ').forEach((kwd) =>\n    rx.push([new RegExp(`^${kwd}$`, 'g'), '$' + kwd]),);\nconst sanitize = (raw) => { if (raw == null) debugger;\n    for (let [key, val] of Object.entries(sanMap)) {\n        raw = raw.replaceAll(key, val);\n    }\n    rx.forEach(([rx, res]) => {\n        raw = raw.replaceAll(rx, res);\n    });\n    return raw;\n};\nconst jsonify = (raw) => JSON.stringify(raw);\nconst string_to_int = (a) => {\n    var v = parseInt(a);\n    if (!isNaN(v) && '' + v === a) return {type: 'some', 0: v}\n    return {type: 'none'}\n}\n\nconst unwrapArray = (v) => {\n    if (!v) debugger\n    return v.type === 'nil' ? [] : [v[0], ...unwrapArray(v[1])]\n};\nconst $eq = (a) => (b) => a == b;\nconst fatal = (e) => {throw new Error(e)}\nconst nil = { type: 'nil' };\nconst cons = (a) => (b) => ({ type: 'cons', 0: a, 1: b });\nconst $pl$pl = (items) => unwrapArray(items).join('');\nconst $pl = (a) => (b) => a + b;\nconst _ = (a) => (b) => a - b;\nconst int_to_string = (a) => a + '';\nconst replace_all = (a) => (b) => (c) => {\n    return a.replaceAll(b, c);\n};\n\nconst unescapeString = (text) => text.replace(/\\\\\\\\./g, (matched) => {\n    if (matched[1] === 'n') {\n        return '\\\\n';\n    }\n    if (matched[1] === 't') return '\\\\t';\n    if (matched[1] === 'r') return '\\\\r';\n    return matched[1];\n});\nconst $co = (a) => (b) => ({ type: ',', 0: a, 1: b });\nconst reduce = (init) => (items) => (f) => {\n    return unwrapArray(items).reduce((a, b) => f(a)(b), init);\n};\n","1":{"type":"nil"},"2":406,"type":"estr"},"2":403,"type":"sdef"}, $env)
const {"eprim": eprim,"evar": evar,"elambda": elambda,"eapp": eapp,"elet": elet,"ematch": ematch} = $env.evaluateStmt({"0":"expr","1":{"0":{"0":"eprim","1":{"0":{"0":"prim","1":503,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":502,"type":",,"},"1":{"0":{"0":"evar","1":{"0":{"0":"string","1":506,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":505,"type":",,"},"1":{"0":{"0":"elambda","1":{"0":{"0":"string","1":509,"type":"tcon"},"1":{"0":{"0":"expr","1":510,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":508,"type":",,"},"1":{"0":{"0":"eapp","1":{"0":{"0":"expr","1":513,"type":"tcon"},"1":{"0":{"0":"expr","1":514,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":512,"type":",,"},"1":{"0":{"0":"elet","1":{"0":{"0":"string","1":517,"type":"tcon"},"1":{"0":{"0":"expr","1":518,"type":"tcon"},"1":{"0":{"0":"expr","1":519,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":516,"type":",,"},"1":{"0":{"0":"ematch","1":{"0":{"0":"expr","1":522,"type":"tcon"},"1":{"0":{"0":{"0":"array","1":524,"type":"tcon"},"1":{"0":{"0":{"0":",","1":526,"type":"tcon"},"1":{"0":"pat","1":527,"type":"tcon"},"2":525,"type":"tapp"},"1":{"0":"expr","1":528,"type":"tcon"},"2":525,"type":"tapp"},"2":523,"type":"tapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":521,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"pint": pint,"pbool": pbool} = $env.evaluateStmt({"0":"prim","1":{"0":{"0":"pint","1":{"0":{"0":"int","1":537,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":536,"type":",,"},"1":{"0":{"0":"pbool","1":{"0":{"0":"bool","1":540,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":539,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"pany": pany,"pvar": pvar,"pprim": pprim,"pstr": pstr,"pcon": pcon} = $env.evaluateStmt({"0":"pat","1":{"0":{"0":"pany","1":{"type":"nil"},"2":545,"type":",,"},"1":{"0":{"0":"pvar","1":{"0":{"0":"string","1":548,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":547,"type":",,"},"1":{"0":{"0":"pprim","1":{"0":{"0":"prim","1":3937,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":3936,"type":",,"},"1":{"0":{"0":"pstr","1":{"0":{"0":"string","1":4151,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4150,"type":",,"},"1":{"0":{"0":"pcon","1":{"0":{"0":"string","1":551,"type":"tcon"},"1":{"0":{"0":{"0":"array","1":553,"type":"tcon"},"1":{"0":"string","1":554,"type":"tcon"},"2":552,"type":"tapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":550,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"tvar": tvar,"tapp": tapp,"tcon": tcon} = $env.evaluateStmt({"0":"type","1":{"0":{"0":"tvar","1":{"0":{"0":"int","1":560,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":559,"type":",,"},"1":{"0":{"0":"tapp","1":{"0":{"0":"type","1":563,"type":"tcon"},"1":{"0":{"0":"type","1":564,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":562,"type":",,"},"1":{"0":{"0":"tcon","1":{"0":{"0":"string","1":567,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":566,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"sdeftype": sdeftype,"sdef": sdef,"sexpr": sexpr} = $env.evaluateStmt({"0":"stmt","1":{"0":{"0":"sdeftype","1":{"0":{"0":"string","1":663,"type":"tcon"},"1":{"0":{"0":{"0":"array","1":665,"type":"tcon"},"1":{"0":{"0":{"0":",","1":667,"type":"tcon"},"1":{"0":"string","1":668,"type":"tcon"},"2":666,"type":"tapp"},"1":{"0":{"0":"array","1":670,"type":"tcon"},"1":{"0":"type","1":671,"type":"tcon"},"2":669,"type":"tapp"},"2":666,"type":"tapp"},"2":664,"type":"tapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":662,"type":",,"},"1":{"0":{"0":"sdef","1":{"0":{"0":"string","1":674,"type":"tcon"},"1":{"0":{"0":"expr","1":675,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":673,"type":",,"},"1":{"0":{"0":"sexpr","1":{"0":{"0":"expr","1":678,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":677,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"nil": nil,"cons": cons} = $env.evaluateStmt({"0":"array","1":{"0":{"0":"nil","1":{"type":"nil"},"2":616,"type":",,"},"1":{"0":{"0":"cons","1":{"0":{"0":"a","1":606,"type":"tcon"},"1":{"0":{"0":{"0":"array","1":610,"type":"tcon"},"1":{"0":"a","1":612,"type":"tcon"},"2":608,"type":"tapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":604,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const snd = $env.evaluateStmt({"0":"snd","1":{"0":"tuple","1":{"0":{"0":"tuple","1":811,"type":"evar"},"1":{"0":{"0":{"0":",","1":{"0":{"0":809,"type":"pany"},"1":{"0":{"0":"v","1":810,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":807,"type":"pcon"},"1":{"0":"v","1":812,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":804,"type":"ematch"},"2":772,"type":"elambda"},"2":772,"type":"sdef"}, $env)
const fst = $env.evaluateStmt({"0":"fst","1":{"0":"tuple","1":{"0":{"0":"tuple","1":825,"type":"evar"},"1":{"0":{"0":{"0":",","1":{"0":{"0":"v","1":823,"type":"pvar"},"1":{"0":{"0":824,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":821,"type":"pcon"},"1":{"0":"v","1":826,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":818,"type":"ematch"},"2":813,"type":"elambda"},"2":813,"type":"sdef"}, $env)
const join = $env.evaluateStmt({"0":"join","1":{"0":"sep","1":{"0":"items","1":{"0":{"0":"items","1":2024,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2026,"type":"pcon"},"1":{"0":"","1":{"type":"nil"},"2":2028,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2034,"type":"pvar"},"1":{"0":{"0":"rest","1":2036,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2032,"type":"pcon"},"1":{"0":{"0":"rest","1":2180,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2182,"type":"pcon"},"1":{"0":"one","1":2184,"type":"evar"},"type":","},"1":{"0":{"0":{"0":2188,"type":"pany"},"1":{"0":{"0":"++","1":2046,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"one","1":2158,"type":"evar"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"sep","1":2160,"type":"evar"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2048,"type":"evar"},"1":{"0":{"0":{"0":"join","1":2164,"type":"evar"},"1":{"0":"sep","1":2166,"type":"evar"},"2":2162,"type":"eapp"},"1":{"0":"rest","1":2168,"type":"evar"},"2":2162,"type":"eapp"},"2":2048,"type":"eapp"},"1":{"0":"nil","1":2048,"type":"evar"},"2":2048,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":2044,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2176,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2020,"type":"ematch"},"2":2008,"type":"elambda"},"2":2008,"type":"elambda"},"2":2008,"type":"sdef"}, $env)
const map = $env.evaluateStmt({"0":"map","1":{"0":"values","1":{"0":"f","1":{"0":{"0":"values","1":2270,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2272,"type":"pcon"},"1":{"0":"nil","1":2274,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2278,"type":"pvar"},"1":{"0":{"0":"rest","1":2280,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2276,"type":"pcon"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"f","1":2292,"type":"evar"},"1":{"0":"one","1":2294,"type":"evar"},"2":2290,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"map","1":2304,"type":"evar"},"1":{"0":"rest","1":2306,"type":"evar"},"2":2296,"type":"eapp"},"1":{"0":"f","1":2308,"type":"evar"},"2":2296,"type":"eapp"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2266,"type":"ematch"},"2":2248,"type":"elambda"},"2":2248,"type":"elambda"},"2":2248,"type":"sdef"}, $env)
const foldl = $env.evaluateStmt({"0":"foldl","1":{"0":"init","1":{"0":"items","1":{"0":"f","1":{"0":{"0":"items","1":2330,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2332,"type":"pcon"},"1":{"0":"init","1":2334,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2338,"type":"pvar"},"1":{"0":{"0":"rest","1":2340,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2336,"type":"pcon"},"1":{"0":{"0":{"0":{"0":"foldl","1":2354,"type":"evar"},"1":{"0":{"0":{"0":"f","1":2358,"type":"evar"},"1":{"0":"init","1":2360,"type":"evar"},"2":2356,"type":"eapp"},"1":{"0":"one","1":2362,"type":"evar"},"2":2356,"type":"eapp"},"2":2352,"type":"eapp"},"1":{"0":"rest","1":2364,"type":"evar"},"2":2352,"type":"eapp"},"1":{"0":"f","1":2366,"type":"evar"},"2":2352,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2326,"type":"ematch"},"2":2312,"type":"elambda"},"2":2312,"type":"elambda"},"2":2312,"type":"elambda"},"2":2312,"type":"sdef"}, $env)
const mapi = $env.evaluateStmt({"0":"mapi","1":{"0":"i","1":{"0":"values","1":{"0":"f","1":{"0":{"0":"values","1":2437,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2438,"type":"pcon"},"1":{"0":"nil","1":2439,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2441,"type":"pvar"},"1":{"0":{"0":"rest","1":2442,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2440,"type":"pcon"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"f","1":2448,"type":"evar"},"1":{"0":"i","1":2449,"type":"evar"},"2":2447,"type":"eapp"},"1":{"0":"one","1":2462,"type":"evar"},"2":2447,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":{"0":"mapi","1":2454,"type":"evar"},"1":{"0":{"0":{"0":"+","1":2466,"type":"evar"},"1":{"0":{"0":1,"1":2468,"type":"pint"},"1":2468,"type":"eprim"},"2":2464,"type":"eapp"},"1":{"0":"i","1":2470,"type":"evar"},"2":2464,"type":"eapp"},"2":2450,"type":"eapp"},"1":{"0":"rest","1":2455,"type":"evar"},"2":2450,"type":"eapp"},"1":{"0":"f","1":2456,"type":"evar"},"2":2450,"type":"eapp"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2435,"type":"ematch"},"2":2402,"type":"elambda"},"2":2402,"type":"elambda"},"2":2402,"type":"elambda"},"2":2402,"type":"sdef"}, $env)
const foldr = $env.evaluateStmt({"0":"foldr","1":{"0":"init","1":{"0":"items","1":{"0":"f","1":{"0":{"0":"items","1":2692,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2693,"type":"pcon"},"1":{"0":"init","1":2694,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2696,"type":"pvar"},"1":{"0":{"0":"rest","1":2697,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2695,"type":"pcon"},"1":{"0":{"0":{"0":"f","1":2712,"type":"evar"},"1":{"0":{"0":{"0":{"0":"foldr","1":2716,"type":"evar"},"1":{"0":"init","1":2718,"type":"evar"},"2":2714,"type":"eapp"},"1":{"0":"rest","1":2720,"type":"evar"},"2":2714,"type":"eapp"},"1":{"0":"f","1":2722,"type":"evar"},"2":2714,"type":"eapp"},"2":2710,"type":"eapp"},"1":{"0":"one","1":2724,"type":"evar"},"2":2710,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2690,"type":"ematch"},"2":2658,"type":"elambda"},"2":2658,"type":"elambda"},"2":2658,"type":"elambda"},"2":2658,"type":"sdef"}, $env)
const consr = $env.evaluateStmt({"0":"consr","1":{"0":"a","1":{"0":"b","1":{"0":{"0":{"0":"cons","1":2808,"type":"evar"},"1":{"0":"b","1":2810,"type":"evar"},"2":2802,"type":"eapp"},"1":{"0":"a","1":2812,"type":"evar"},"2":2802,"type":"eapp"},"2":2790,"type":"elambda"},"2":2790,"type":"elambda"},"2":2790,"type":"sdef"}, $env)
const replaces = $env.evaluateStmt({"0":"replaces","1":{"0":"target","1":{"0":"repl","1":{"0":{"0":"repl","1":2882,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":2884,"type":"pcon"},"1":{"0":"target","1":2886,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"one","1":2954,"type":"pvar"},"1":{"0":{"0":"rest","1":2956,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2952,"type":"pcon"},"1":{"0":{"0":"one","1":2968,"type":"evar"},"1":{"0":{"0":{"0":",","1":{"0":{"0":"find","1":2974,"type":"pvar"},"1":{"0":{"0":"nw","1":2976,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2970,"type":"pcon"},"1":{"0":{"0":{"0":"replaces","1":2986,"type":"evar"},"1":{"0":{"0":{"0":{"0":"replace-all","1":2988,"type":"evar"},"1":{"0":"target","1":2989,"type":"evar"},"2":2987,"type":"eapp"},"1":{"0":"find","1":2990,"type":"evar"},"2":2987,"type":"eapp"},"1":{"0":"nw","1":2991,"type":"evar"},"2":2987,"type":"eapp"},"2":2978,"type":"eapp"},"1":{"0":"rest","1":2992,"type":"evar"},"2":2978,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":2964,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2878,"type":"ematch"},"2":2864,"type":"elambda"},"2":2864,"type":"elambda"},"2":2864,"type":"sdef"}, $env)
const quot = $env.evaluateStmt({"0":"quot","1":{"0":"expr","1":{"0":{"0":"expr","1":3088,"type":"evar"},"1":{"0":{"0":{"0":"eprim","1":{"0":{"0":"prim","1":3094,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":3090,"type":"pcon"},"1":{"0":{"0":"prim","1":3100,"type":"evar"},"1":{"0":{"0":{"0":"pstr","1":{"0":{"0":"string","1":3106,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":3102,"type":"pcon"},"1":{"0":{"0":"++","1":3110,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":3112,"type":"evar"},"1":{"0":"{type: ","1":{"type":"nil"},"2":3115,"type":"estr"},"2":3112,"type":"eapp"},"1":{"0":"nil","1":3112,"type":"evar"},"2":3112,"type":"eapp"},"2":3108,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":3096,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":3084,"type":"ematch"},"2":3072,"type":"elambda"},"2":3072,"type":"sdef"}, $env)
const literal_constr = $env.evaluateStmt({"0":"literal-constr","1":{"0":"name","1":{"0":"args","1":{"0":{"0":"++","1":3132,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"({type: \\\"","1":{"type":"nil"},"2":3166,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"name","1":3168,"type":"evar"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"\"","1":{"type":"nil"},"2":3169,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"++","1":3172,"type":"evar"},"1":{"0":{"0":{"0":{"0":"mapi","1":3174,"type":"evar"},"1":{"0":{"0":0,"1":3175,"type":"pint"},"1":3175,"type":"eprim"},"2":3173,"type":"eapp"},"1":{"0":"args","1":3176,"type":"evar"},"2":3173,"type":"eapp"},"1":{"0":"i","1":{"0":"arg","1":{"0":{"0":"++","1":3183,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":", ","1":{"type":"nil"},"2":3185,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"int-to-string","1":3188,"type":"evar"},"1":{"0":"i","1":3189,"type":"evar"},"2":3187,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":": ","1":{"type":"nil"},"2":3190,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3184,"type":"evar"},"1":{"0":"arg","1":3192,"type":"evar"},"2":3184,"type":"eapp"},"1":{"0":"nil","1":3184,"type":"evar"},"2":3184,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":3182,"type":"eapp"},"2":3177,"type":"elambda"},"2":3177,"type":"elambda"},"2":3173,"type":"eapp"},"2":3171,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3134,"type":"evar"},"1":{"0":"})","1":{"type":"nil"},"2":3195,"type":"estr"},"2":3134,"type":"eapp"},"1":{"0":"nil","1":3134,"type":"evar"},"2":3134,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":3130,"type":"eapp"},"2":3118,"type":"elambda"},"2":3118,"type":"elambda"},"2":3118,"type":"sdef"}, $env)
const escape_string = $env.evaluateStmt({"0":"escape-string","1":{"0":"string","1":{"0":{"0":{"0":"replaces","1":3316,"type":"evar"},"1":{"0":"string","1":3318,"type":"evar"},"2":3314,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3324,"type":"evar"},"1":{"0":"\\\\","1":{"type":"nil"},"2":3326,"type":"estr"},"2":3322,"type":"eapp"},"1":{"0":"\\\\\\\\","1":{"type":"nil"},"2":3330,"type":"estr"},"2":3322,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3336,"type":"evar"},"1":{"0":"\\n","1":{"type":"nil"},"2":3338,"type":"estr"},"2":3334,"type":"eapp"},"1":{"0":"\\\\n","1":{"type":"nil"},"2":3342,"type":"estr"},"2":3334,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3348,"type":"evar"},"1":{"0":"\\\"","1":{"type":"nil"},"2":3350,"type":"estr"},"2":3346,"type":"eapp"},"1":{"0":"\\\\\"","1":{"type":"nil"},"2":3354,"type":"estr"},"2":3346,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4475,"type":"evar"},"1":{"0":"`","1":{"type":"nil"},"2":4476,"type":"estr"},"2":4474,"type":"eapp"},"1":{"0":"\\\\`","1":{"type":"nil"},"2":4478,"type":"estr"},"2":4474,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3320,"type":"evar"},"1":{"0":{"0":{"0":",","1":4481,"type":"evar"},"1":{"0":"$","1":{"type":"nil"},"2":4482,"type":"estr"},"2":4480,"type":"eapp"},"1":{"0":"\\\\$","1":{"type":"nil"},"2":4484,"type":"estr"},"2":4480,"type":"eapp"},"2":3320,"type":"eapp"},"1":{"0":"nil","1":3320,"type":"evar"},"2":3320,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":3314,"type":"eapp"},"2":3306,"type":"elambda"},"2":3306,"type":"sdef"}, $env)
const unescape_string = $env.evaluateStmt({"0":"unescape-string","1":{"0":"string","1":{"0":{"0":{"0":"replaces","1":3368,"type":"evar"},"1":{"0":"string","1":3370,"type":"evar"},"2":3366,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4617,"type":"evar"},"1":{"0":"\\\\n","1":{"type":"nil"},"2":4618,"type":"estr"},"2":4614,"type":"eapp"},"1":{"0":"\\n","1":{"type":"nil"},"2":4620,"type":"estr"},"2":4614,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4536,"type":"evar"},"1":{"0":"\\\\\\\\","1":{"type":"nil"},"2":4537,"type":"estr"},"2":4529,"type":"eapp"},"1":{"0":"\\\\","1":{"type":"nil"},"2":4539,"type":"estr"},"2":4529,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3372,"type":"evar"},"1":{"0":{"0":{"0":",","1":3376,"type":"evar"},"1":{"0":"\\\\\"","1":{"type":"nil"},"2":3378,"type":"estr"},"2":3374,"type":"eapp"},"1":{"0":"\\\"","1":{"type":"nil"},"2":3382,"type":"estr"},"2":3374,"type":"eapp"},"2":3372,"type":"eapp"},"1":{"0":"nil","1":3372,"type":"evar"},"2":3372,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":3366,"type":"eapp"},"2":3358,"type":"elambda"},"2":3358,"type":"sdef"}, $env)
const {"lol": lol} = $env.evaluateStmt({"0":"lol","1":{"0":{"0":"lol","1":{"0":{"0":"a","1":4656,"type":"tcon"},"1":{"0":{"0":"b","1":4657,"type":"tcon"},"1":{"0":{"0":"c","1":4658,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4655,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"sdeftype"}, $env)
const x = $env.evaluateStmt({"0":"x","1":{"0":{"0":123,"1":4664,"type":"pint"},"1":4664,"type":"eprim"},"2":4659,"type":"sdef"}, $env)
const prelude = $env.evaluateStmt({"0":"prelude","1":{"0":{"0":"eval","1":4713,"type":"evar"},"1":{"0":"(() => {const sanMap = { '-': '_', '+': '$pl', '*': '$ti', '=': '$eq', \n'>': '$gt', '<': '$lt', \"'\": '$qu', '\"': '$dq', ',': '$co', '@': '$at', '/': '$sl'};\n\nconst kwds = 'case var else const let var new if return default break while for super';\nconst rx = [];\nkwds.split(' ').forEach((kwd) =>\n    rx.push([new RegExp(`^${kwd}$`, 'g'), '$' + kwd]),);\nconst sanitize = (raw) => { if (raw == null) debugger;\n    for (let [key, val] of Object.entries(sanMap)) {\n        raw = raw.replaceAll(key, val);\n    }\n    rx.forEach(([rx, res]) => {\n        raw = raw.replaceAll(rx, res);\n    });\n    return raw;\n};\nconst jsonify = (raw) => JSON.stringify(raw);\nconst string_to_int = (a) => {\n    var v = parseInt(a);\n    if (!isNaN(v) && '' + v === a) return {type: 'some', 0: v}\n    return {type: 'none'}\n}\n\nconst unwrapArray = (v) => {\n    if (!v) debugger\n    return v.type === 'nil' ? [] : [v[0], ...unwrapArray(v[1])]\n};\nconst $eq = (a) => (b) => a == b;\nconst fatal = (e) => {throw new Error(e)}\nconst nil = { type: 'nil' };\nconst cons = (a) => (b) => ({ type: 'cons', 0: a, 1: b });\nconst $pl$pl = (items) => unwrapArray(items).join('');\nconst $pl = (a) => (b) => a + b;\nconst _ = (a) => (b) => a - b;\nconst int_to_string = (a) => a + '';\nconst replace_all = (a) => (b) => (c) => {\n    return a.replaceAll(b, c);\n};\n\nconst unescapeString = (text) => text.replace(/\\\\\\\\./g, (matched) => {\n    if (matched[1] === 'n') {\n        return '\\\\n';\n    }\n    if (matched[1] === 't') return '\\\\t';\n    if (matched[1] === 'r') return '\\\\r';\n    return matched[1];\n});\nconst $co = (a) => (b) => ({ type: ',', 0: a, 1: b });\nconst reduce = (init) => (items) => (f) => {\n    return unwrapArray(items).reduce((a, b) => f(a)(b), init);\n};\nreturn {$pl$pl: '' + $pl$pl}})()","1":{"type":"nil"},"2":4711,"type":"estr"},"2":4712,"type":"eapp"},"2":4707,"type":"sdef"}, $env)
const compile_pat = $env.evaluateStmt({"0":"compile-pat","1":{"0":"pat","1":{"0":"target","1":{"0":"inner","1":{"0":{"0":"pat","1":4087,"type":"evar"},"1":{"0":{"0":{"0":"pany","1":{"type":"nil"},"2":4088,"type":"pcon"},"1":{"0":"inner","1":4090,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"pprim","1":{"0":{"0":"prim","1":4095,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":4092,"type":"pcon"},"1":{"0":{"0":"prim","1":4098,"type":"evar"},"1":{"0":{"0":{"0":"pint","1":{"0":{"0":"int","1":4101,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":4099,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4224,"type":"evar"},"1":" === ","type":","},"1":{"0":{"0":{"0":"int","1":4138,"type":"evar"},"1":") {\\n","type":","},"1":{"0":{"0":{"0":"inner","1":4140,"type":"evar"},"1":"\\n}","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4105,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pbool","1":{"0":{"0":"bool","1":4113,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":4104,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4226,"type":"evar"},"1":" === ","type":","},"1":{"0":{"0":{"0":"bool","1":4143,"type":"evar"},"1":") {\\n","type":","},"1":{"0":{"0":{"0":"inner","1":4145,"type":"evar"},"1":"\\n}","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4114,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4096,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"pstr","1":{"0":{"0":"str","1":4153,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":4148,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4230,"type":"evar"},"1":" === \\\"","type":","},"1":{"0":{"0":{"0":"str","1":4156,"type":"evar"},"1":"\\\"){\\n","type":","},"1":{"0":{"0":{"0":"inner","1":4158,"type":"evar"},"1":"\\n}","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4154,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pvar","1":{"0":{"0":"name","1":4131,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":4129,"type":"pcon"},"1":{"0":"{\\nlet ","1":{"0":{"0":{"0":{"0":"sanitize","1":4473,"type":"evar"},"1":{"0":"name","1":4161,"type":"evar"},"2":4472,"type":"eapp"},"1":" = ","type":","},"1":{"0":{"0":{"0":"target","1":4228,"type":"evar"},"1":";\\n","type":","},"1":{"0":{"0":{"0":"inner","1":4163,"type":"evar"},"1":"\\n}","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4132,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pcon","1":{"0":{"0":"name","1":4167,"type":"pvar"},"1":{"0":{"0":"args","1":4168,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4165,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4285,"type":"evar"},"1":".type === \\\"","type":","},"1":{"0":{"0":{"0":"name","1":4287,"type":"evar"},"1":"\\\") {\\n","type":","},"1":{"0":{"0":{"0":{"0":{"0":{"0":{"0":"pat-loop","1":4291,"type":"evar"},"1":{"0":"target","1":4303,"type":"evar"},"2":4289,"type":"eapp"},"1":{"0":"args","1":4292,"type":"evar"},"2":4289,"type":"eapp"},"1":{"0":{"0":0,"1":4293,"type":"pint"},"1":4293,"type":"eprim"},"2":4289,"type":"eapp"},"1":{"0":"inner","1":4294,"type":"evar"},"2":4289,"type":"eapp"},"1":"\\n}","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4283,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4085,"type":"ematch"},"2":4079,"type":"elambda"},"2":4079,"type":"elambda"},"2":4079,"type":"elambda"},"2":4079,"type":"sdef"}, $env)

const pat_loop = $env.evaluateStmt({"0":"pat-loop","1":{"0":"target","1":{"0":"args","1":{"0":"i","1":{"0":"inner","1":{"0":{"0":"args","1":4259,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":4260,"type":"pcon"},"1":{"0":"inner","1":4261,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":{"0":{"0":"arg","1":4263,"type":"pvar"},"1":{"0":{"0":"rest","1":4264,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4262,"type":"pcon"},"1":{"0":{"0":{"0":{"0":"compile-pat","1":4269,"type":"evar"},"1":{"0":"arg","1":4270,"type":"evar"},"2":4268,"type":"eapp"},"1":{"0":"","1":{"0":{"0":{"0":"target","1":4297,"type":"evar"},"1":"[","type":","},"1":{"0":{"0":{"0":"i","1":4295,"type":"evar"},"1":"]","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4271,"type":"estr"},"2":4268,"type":"eapp"},"1":{"0":{"0":{"0":{"0":{"0":"pat-loop","1":4274,"type":"evar"},"1":{"0":"target","1":4275,"type":"evar"},"2":4273,"type":"eapp"},"1":{"0":"rest","1":4301,"type":"evar"},"2":4273,"type":"eapp"},"1":{"0":{"0":{"0":"+","1":4277,"type":"evar"},"1":{"0":"i","1":4278,"type":"evar"},"2":4276,"type":"eapp"},"1":{"0":{"0":1,"1":4279,"type":"pint"},"1":4279,"type":"eprim"},"2":4276,"type":"eapp"},"2":4273,"type":"eapp"},"1":{"0":"inner","1":4282,"type":"evar"},"2":4273,"type":"eapp"},"2":4268,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4257,"type":"ematch"},"2":4251,"type":"elambda"},"2":4251,"type":"elambda"},"2":4251,"type":"elambda"},"2":4251,"type":"elambda"},"2":4251,"type":"sdef"}, $env)
const compile = $env.evaluateStmt({"0":"compile","1":{"0":"expr","1":{"0":{"0":"expr","1":1748,"type":"evar"},"1":{"0":{"0":{"0":"estr","1":{"0":{"0":"first","1":4381,"type":"pvar"},"1":{"0":{"0":"tpls","1":4382,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4378,"type":"pcon"},"1":{"0":{"0":"tpls","1":4450,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":{"type":"nil"},"2":4451,"type":"pcon"},"1":{"0":"\\\"","1":{"0":{"0":{"0":{"0":"escape-string","1":4456,"type":"evar"},"1":{"0":{"0":"unescapeString","1":4458,"type":"evar"},"1":{"0":"first","1":4459,"type":"evar"},"2":4457,"type":"eapp"},"2":4454,"type":"eapp"},"1":"\\\"","type":","},"1":{"type":"nil"},"type":"cons"},"2":4452,"type":"estr"},"type":","},"1":{"0":{"0":{"0":4460,"type":"pany"},"1":{"0":"`","1":{"0":{"0":{"0":{"0":"escape-string","1":4384,"type":"evar"},"1":{"0":{"0":"unescapeString","1":4389,"type":"evar"},"1":{"0":"first","1":4390,"type":"evar"},"2":4388,"type":"eapp"},"2":4386,"type":"eapp"},"1":"","type":","},"1":{"0":{"0":{"0":{"0":{"0":"join","1":4401,"type":"evar"},"1":{"0":"","1":{"type":"nil"},"2":4402,"type":"estr"},"2":4399,"type":"eapp"},"1":{"0":{"0":{"0":"map","1":4405,"type":"evar"},"1":{"0":"tpls","1":4406,"type":"evar"},"2":4404,"type":"eapp"},"1":{"0":"item","1":{"0":{"0":"item","1":4423,"type":"evar"},"1":{"0":{"0":{"0":",","1":{"0":{"0":"expr","1":4421,"type":"pvar"},"1":{"0":{"0":"suffix","1":4422,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4419,"type":"pcon"},"1":{"0":"${","1":{"0":{"0":{"0":{"0":"compile","1":4428,"type":"evar"},"1":{"0":"expr","1":4429,"type":"evar"},"2":4426,"type":"eapp"},"1":"}","type":","},"1":{"0":{"0":{"0":{"0":"escape-string","1":4433,"type":"evar"},"1":{"0":{"0":"unescape-string","1":4435,"type":"evar"},"1":{"0":"suffix","1":4430,"type":"evar"},"2":4434,"type":"eapp"},"2":4432,"type":"eapp"},"1":"","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4424,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":4414,"type":"ematch"},"2":4407,"type":"elambda"},"2":4404,"type":"eapp"},"2":4399,"type":"eapp"},"1":"`","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4380,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4446,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"eprim","1":{"0":{"0":"prim","1":1751,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1749,"type":"pcon"},"1":{"0":{"0":"prim","1":1754,"type":"evar"},"1":{"0":{"0":{"0":"pstr","1":{"0":{"0":"string","1":1757,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1755,"type":"pcon"},"1":{"0":{"0":"++","1":1759,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"\\\"","1":{"type":"nil"},"2":1761,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"escape-string","1":3410,"type":"evar"},"1":{"0":{"0":"unescape-string","1":3412,"type":"evar"},"1":{"0":"string","1":3426,"type":"evar"},"2":3424,"type":"eapp"},"2":3006,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":1760,"type":"evar"},"1":{"0":"\\\"","1":{"type":"nil"},"2":1770,"type":"estr"},"2":1760,"type":"eapp"},"1":{"0":"nil","1":1760,"type":"evar"},"2":1760,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":1758,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"pint","1":{"0":{"0":"int","1":1774,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1772,"type":"pcon"},"1":{"0":{"0":"int-to-string","1":1776,"type":"evar"},"1":{"0":"int","1":1777,"type":"evar"},"2":1775,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"pbool","1":{"0":{"0":"bool","1":1780,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1778,"type":"pcon"},"1":{"0":{"0":"bool","1":1783,"type":"evar"},"1":{"0":{"0":{"0":{"0":true,"1":4075,"type":"pbool"},"1":4075,"type":"pprim"},"1":{"0":"true","1":{"type":"nil"},"2":1784,"type":"estr"},"type":","},"1":{"0":{"0":{"0":{"0":false,"1":4076,"type":"pbool"},"1":4076,"type":"pprim"},"1":{"0":"false","1":{"type":"nil"},"2":1786,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1781,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":1752,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"evar","1":{"0":{"0":"name","1":1790,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1788,"type":"pcon"},"1":{"0":{"0":"sanitize","1":1792,"type":"evar"},"1":{"0":"name","1":1793,"type":"evar"},"2":1791,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"equot","1":{"0":{"0":"inner","1":2828,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":2824,"type":"pcon"},"1":{"0":{"0":"jsonify","1":2832,"type":"evar"},"1":{"0":"inner","1":2834,"type":"evar"},"2":2830,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"elambda","1":{"0":{"0":"name","1":1796,"type":"pvar"},"1":{"0":{"0":"body","1":1797,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1794,"type":"pcon"},"1":{"0":{"0":"++","1":1799,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"(","1":{"type":"nil"},"2":1801,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"sanitize","1":1804,"type":"evar"},"1":{"0":"name","1":1805,"type":"evar"},"2":1803,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":") => ","1":{"type":"nil"},"2":1806,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":1800,"type":"evar"},"1":{"0":{"0":"compile","1":1809,"type":"evar"},"1":{"0":"body","1":1810,"type":"evar"},"2":1808,"type":"eapp"},"2":1800,"type":"eapp"},"1":{"0":"nil","1":1800,"type":"evar"},"2":1800,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":1798,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"elet","1":{"0":{"0":"name","1":1813,"type":"pvar"},"1":{"0":{"0":"init","1":1814,"type":"pvar"},"1":{"0":{"0":"body","1":1815,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":1811,"type":"pcon"},"1":{"0":{"0":"++","1":1817,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"((","1":{"type":"nil"},"2":1819,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"sanitize","1":1822,"type":"evar"},"1":{"0":"name","1":1823,"type":"evar"},"2":1821,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":") => ","1":{"type":"nil"},"2":1824,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1827,"type":"evar"},"1":{"0":"body","1":1828,"type":"evar"},"2":1826,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":")(","1":{"type":"nil"},"2":1829,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1832,"type":"evar"},"1":{"0":"init","1":1833,"type":"evar"},"2":1831,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":1818,"type":"evar"},"1":{"0":")","1":{"type":"nil"},"2":1834,"type":"estr"},"2":1818,"type":"eapp"},"1":{"0":"nil","1":1818,"type":"evar"},"2":1818,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":1816,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"eapp","1":{"0":{"0":"f","1":1838,"type":"pvar"},"1":{"0":{"0":"arg","1":1839,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1836,"type":"pcon"},"1":{"0":{"0":"f","1":1842,"type":"evar"},"1":{"0":{"0":{"0":"elambda","1":{"0":{"0":"name","1":1845,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":1843,"type":"pcon"},"1":{"0":{"0":"++","1":1847,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"(","1":{"type":"nil"},"2":1849,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1852,"type":"evar"},"1":{"0":"f","1":1853,"type":"evar"},"2":1851,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":")(","1":{"type":"nil"},"2":1854,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1857,"type":"evar"},"1":{"0":"arg","1":1858,"type":"evar"},"2":1856,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":1848,"type":"evar"},"1":{"0":")","1":{"type":"nil"},"2":1859,"type":"estr"},"2":1848,"type":"eapp"},"1":{"0":"nil","1":1848,"type":"evar"},"2":1848,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":1846,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":1861,"type":"pany"},"1":{"0":{"0":"++","1":1863,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1866,"type":"evar"},"1":{"0":"f","1":1867,"type":"evar"},"2":1865,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"(","1":{"type":"nil"},"2":1868,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":1871,"type":"evar"},"1":{"0":"arg","1":1872,"type":"evar"},"2":1870,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":1864,"type":"evar"},"1":{"0":")","1":{"type":"nil"},"2":1873,"type":"estr"},"2":1864,"type":"eapp"},"1":{"0":"nil","1":1864,"type":"evar"},"2":1864,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":1862,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1840,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"ematch","1":{"0":{"0":"target","1":1877,"type":"pvar"},"1":{"0":{"0":"cases","1":1878,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1875,"type":"pcon"},"1":{"0":"(($target) => {","1":{"0":{"0":{"0":{"0":{"0":"join","1":4363,"type":"evar"},"1":{"0":"\\n","1":{"type":"nil"},"2":4376,"type":"estr"},"2":4362,"type":"eapp"},"1":{"0":{"0":{"0":"map","1":4325,"type":"evar"},"1":{"0":"cases","1":4326,"type":"evar"},"2":4323,"type":"eapp"},"1":{"0":"case","1":{"0":{"0":"case","1":4349,"type":"evar"},"1":{"0":{"0":{"0":",","1":{"0":{"0":"pat","1":4346,"type":"pvar"},"1":{"0":{"0":"body","1":4347,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4344,"type":"pcon"},"1":{"0":{"0":{"0":{"0":"compile-pat","1":4352,"type":"evar"},"1":{"0":"pat","1":4353,"type":"evar"},"2":4348,"type":"eapp"},"1":{"0":"$target","1":{"type":"nil"},"2":4354,"type":"estr"},"2":4348,"type":"eapp"},"1":{"0":"return ","1":{"0":{"0":{"0":{"0":"compile","1":4360,"type":"evar"},"1":{"0":"body","1":4361,"type":"evar"},"2":4358,"type":"eapp"},"1":"","type":","},"1":{"type":"nil"},"type":"cons"},"2":4356,"type":"estr"},"2":4348,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":4340,"type":"ematch"},"2":4334,"type":"elambda"},"2":4323,"type":"eapp"},"2":4362,"type":"eapp"},"1":"\\nthrow new Error('Failed to match. ' + valueToString($target))})(","type":","},"1":{"0":{"0":{"0":{"0":"compile","1":4321,"type":"evar"},"1":{"0":"target","1":4322,"type":"evar"},"2":4318,"type":"eapp"},"1":")","type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4314,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":1746,"type":"ematch"},"2":828,"type":"elambda"},"2":828,"type":"sdef"}, $env)
const run = $env.evaluateStmt({"0":"run","1":{"0":"v","1":{"0":{"0":"eval","1":3666,"type":"evar"},"1":{"0":{"0":"compile","1":3668,"type":"evar"},"1":{"0":"v","1":3669,"type":"evar"},"2":3667,"type":"eapp"},"2":3665,"type":"eapp"},"2":3658,"type":"elambda"},"2":3658,"type":"sdef"}, $env)
const compile_st = $env.evaluateStmt({"0":"compile-st","1":{"0":"stmt","1":{"0":{"0":"stmt","1":731,"type":"evar"},"1":{"0":{"0":{"0":"sexpr","1":{"0":{"0":"expr","1":734,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"2":732,"type":"pcon"},"1":{"0":{"0":"compile","1":736,"type":"evar"},"1":{"0":"expr","1":737,"type":"evar"},"2":735,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"sdef","1":{"0":{"0":"name","1":740,"type":"pvar"},"1":{"0":{"0":"body","1":741,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":738,"type":"pcon"},"1":{"0":{"0":"++","1":743,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"const ","1":{"type":"nil"},"2":745,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"sanitize","1":748,"type":"evar"},"1":{"0":"name","1":749,"type":"evar"},"2":747,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":" = ","1":{"type":"nil"},"2":750,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"compile","1":753,"type":"evar"},"1":{"0":"body","1":754,"type":"evar"},"2":752,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":744,"type":"evar"},"1":{"0":";\\n","1":{"type":"nil"},"2":755,"type":"estr"},"2":744,"type":"eapp"},"1":{"0":"nil","1":744,"type":"evar"},"2":744,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":742,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"sdeftype","1":{"0":{"0":"name","1":759,"type":"pvar"},"1":{"0":{"0":"cases","1":760,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":757,"type":"pcon"},"1":{"0":{"0":{"0":"join","1":2190,"type":"evar"},"1":{"0":"\\n","1":{"type":"nil"},"2":2192,"type":"estr"},"2":763,"type":"eapp"},"1":{"0":{"0":{"0":"map","1":2198,"type":"evar"},"1":{"0":"cases","1":2200,"type":"evar"},"2":2196,"type":"eapp"},"1":{"0":"case","1":{"0":{"0":"case","1":2310,"type":"evar"},"1":{"0":{"0":{"0":",,","1":{"0":{"0":"name2","1":2226,"type":"pvar"},"1":{"0":{"0":"args","1":2228,"type":"pvar"},"1":{"0":{"0":"loc","1":4719,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":2222,"type":"pcon"},"1":{"0":{"0":"++","1":2234,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"const ","1":{"type":"nil"},"2":2239,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"sanitize","1":2242,"type":"evar"},"1":{"0":"name2","1":3934,"type":"evar"},"2":3932,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":" = ","1":{"type":"nil"},"2":2244,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"++","1":2486,"type":"evar"},"1":{"0":{"0":{"0":{"0":"mapi","1":2392,"type":"evar"},"1":{"0":{"0":0,"1":2472,"type":"pint"},"1":2472,"type":"eprim"},"2":2386,"type":"eapp"},"1":{"0":"args","1":2394,"type":"evar"},"2":2386,"type":"eapp"},"1":{"0":"i","1":{"0":"$arg","1":{"0":{"0":"$arg","1":2396,"type":"evar"},"1":{"0":{"0":{"0":2476,"type":"pany"},"1":{"0":{"0":"++","1":2492,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"(v","1":{"type":"nil"},"2":2514,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"int-to-string","1":2517,"type":"evar"},"1":{"0":"i","1":2518,"type":"evar"},"2":2516,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2506,"type":"evar"},"1":{"0":") => ","1":{"type":"nil"},"2":2519,"type":"estr"},"2":2506,"type":"eapp"},"1":{"0":"nil","1":2506,"type":"evar"},"2":2506,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":2490,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":2396,"type":"ematch"},"type":"elambda"},"2":2396,"type":"elambda"},"2":2386,"type":"eapp"},"2":2484,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"({type: \\\"","1":{"type":"nil"},"2":2522,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"name2","1":2530,"type":"evar"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":"\\\"","1":{"type":"nil"},"2":2532,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"++","1":2548,"type":"evar"},"1":{"0":{"0":{"0":{"0":"mapi","1":2552,"type":"evar"},"1":{"0":{"0":0,"1":2554,"type":"pint"},"1":2554,"type":"eprim"},"2":2550,"type":"eapp"},"1":{"0":"args","1":2556,"type":"evar"},"2":2550,"type":"eapp"},"1":{"0":"i","1":{"0":"$arg","1":{"0":{"0":"$arg","1":2558,"type":"evar"},"1":{"0":{"0":{"0":2566,"type":"pany"},"1":{"0":{"0":"++","1":2570,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":", ","1":{"type":"nil"},"2":2584,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"int-to-string","1":2590,"type":"evar"},"1":{"0":"i","1":2592,"type":"evar"},"2":2588,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":": v","1":{"type":"nil"},"2":2575,"type":"estr"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2572,"type":"evar"},"1":{"0":{"0":"int-to-string","1":2580,"type":"evar"},"1":{"0":"i","1":2582,"type":"evar"},"2":2578,"type":"eapp"},"2":2572,"type":"eapp"},"1":{"0":"nil","1":2572,"type":"evar"},"2":2572,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":2568,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":2558,"type":"ematch"},"type":"elambda"},"2":2558,"type":"elambda"},"2":2550,"type":"eapp"},"2":2536,"type":"eapp"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2236,"type":"evar"},"1":{"0":"});","1":{"type":"nil"},"2":2594,"type":"estr"},"2":2236,"type":"eapp"},"1":{"0":"nil","1":2236,"type":"evar"},"2":2236,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":-1,"type":"eapp"},"2":2230,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":2216,"type":"ematch"},"2":2202,"type":"elambda"},"2":2196,"type":"eapp"},"2":763,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":729,"type":"ematch"},"2":638,"type":"elambda"},"2":638,"type":"sdef"}, $env)
return $env.evaluateStmt({"0":{"0":{"0":{"0":{"0":{"0":"eval","1":4715,"type":"evar"},"1":{"0":"compile => compile_stmt => prelude => ({type:'fns',compile: a => _ => compile(a), compile_stmt: a => _ => compile_stmt(a), prelude})","1":{"type":"nil"},"2":4077,"type":"estr"},"2":4714,"type":"eapp"},"1":{"0":"compile","1":4716,"type":"evar"},"2":4714,"type":"eapp"},"1":{"0":"compile-st","1":4717,"type":"evar"},"2":4714,"type":"eapp"},"1":{"0":"prelude","1":4718,"type":"evar"},"2":4714,"type":"eapp"},"1":4714,"type":"sexpr"}, $env)