const $prelude = (() => {const evaluate = (node, scope) => {
  if (!scope) throw new Error(`evaluate called without scope`)
  switch (node.type) {
    // For primitives, we trivially produce the contained value
    case 'eprim':
      return node[0][0]
    // For strings, we need to handle escapes correctly (e.g. the AST node will have "a\\n", which needs to become "a\n" at runtime) and evaluate
    // any contained template expressions
    case 'estr':
      return unescapeSlashes(node[0]) + unwrapList(node[1]).map(({0: exp, 1: suf}) => evaluate(exp, scope) + unescapeSlashes(suf)).join('')
    // For variables, we look up the name in the `scope` map that we pass everywhere.
    // We use `sanitize` for compatability with the structured editor environment, which expects variable names to be valid javascript names.
    case 'evar':
      var name = node[0]
      if (!Object.hasOwn(scope, name)) {
        throw new Error(`Variable not in scope: ${name}. ${Object.keys(scope).join(', ')}`)
      }
      return scope[name]
    // For lambdas, we're producing an arrow function that accepts the right number of (curried) arguments, matches each provided value with the
    // corresponding pattern, and then evaluates the body with the `scope` map having all of the resulting bindings.
    // Note that auto-currying means that `(fn [a b] c)` becomes `a => b => c` instead of `(a, b) => c`.
    case 'elambda':
      return unwrapList(node[0]).reduceRight((body, arg) => scope => v => body({...scope, ...evalPat(arg, v)}), scope => evaluate(node[1], scope))(scope)
    // Application is also curried, so we need to loop through the arguments list so that `(eapp t [a b])` becomes `t(a)(b)`.
    case 'eapp':
      return unwrapList(node[1]).reduce((f, arg) => f(evaluate(arg, scope)), evaluate(node[0], scope))
    // For `let`, we go through each binding, evaluate the provided `init` against the pattern, and add any bindings to the scope.
    // We're doing the evaluations in *series* instead of *parallel* to allow later bindings to refer to previous ones.
    // so you can do `(let [a 2 b (+ a 4)] b)` and have it evaluate correctly.
    // Note that this method doesn't allow for self-recursion in let bindings. We'll relax that restriction in the self-hosted compiler.
    case 'elet':
      const inner = unwrapList(node[0]).reduce((scope, {0: pat, 1: init}) => {
        const value = evaluate(init, scope)
        const match = evalPat(pat, value)
        if (match == null) throw new Error(`let pattern didnt't match! ${JSON.stringify(value)} vs ${valueToString(pat)}`)
        return {...scope, ...match}
      }, scope)
      return evaluate(node[1], inner)
    // Match walks through each case, checks to see if the patterns matches the value, and if it does, evaluates the body with any bindings from that
    // pattern added onto the scope.
    // If no cases match, we throw an error.
    case 'ematch':
      const target = evaluate(node[0], scope)
      for (let {0: pat, 1: body} of unwrapList(node[1])) {
        const got = evalPat(pat, target)
        if (got) {
          return evaluate(body, {...scope, ...got})
        }
      }
      throw new Error(`match failed (${node[2]}): ${JSON.stringify(target)} - ${JSON.stringify(node[0])}`)
    // `equot` trivially produces the contained data structure; whether it's CST or AST.
    case 'equot':
      return node[0][0]
  }
  throw new Error(`cant evaluatoe ${node.type}`)
};

const evaluateStmt = (node, env) => {
  switch (node.type) {
    case 'sexpr': return evaluate(node[0], env)
    case 'sdef':
      const value = evaluate(node[1], env)
      env[node[0]] = value
      return value
    case 'sdeftype':
      const res = {}
      unwrapList(node[1]).forEach(({0: name, 1: args}) => {
        res[name] = env[name] = constrFn(name, args)
      })
      return res
  }
};

const unwrapList = value => value.type === 'nil' ? [] : [value[0], ...unwrapList(value[1])];

const constrFn = (name, args) => {
  const next = (args) => {
    if (args.type === 'nil') return values => ({type: name, ...values})
    return values => arg => next(args[1])([...values, arg])
  }
  return next(args)([])
};

const sanitize = (raw) => {
    for (let [key, val] of Object.entries(sanMap)) {
        raw = raw.replaceAll(key, val);
    }
    if (kwds.includes(raw)) return '$' + raw
    return raw
};

const sanMap = {"$":"$$$$","-":"_","+":"$pl","*":"$ti","=":"$eq",">":"$gt","<":"$lt","'":"$qu","\"":"$dq",",":"$co","/":"$sl",";":"$semi","@":"$at","!":"$ex","|":"$bar","()":"$unit","?":"$qe"};

const evalPat = (node, v) => {
  switch (node.type) {
    case 'pany': return {}
    case 'pprim': return v === node[0][0] ? {} : null
    case 'pstr': return v === node[0]
    case 'pvar':
      return {[node[0]]: v}
    case 'pcon':
      if (v.type === node[0]) {
        const args = unwrapList(node[2])
        const scope = {}
        for (let i=0; i<args.length; i++) {
          const sub = evalPat(args[i], v[i])
          if (!sub) return null
          Object.assign(scope, sub)
        }
        return scope
      }
      return null
  }
  throw new Error(`Unexpected pat ${JSON.stringify(node)}`)
};

const kwds = ["case","new","var","const","let","if","else","return","super","break","while","for","default"];

const unescapeSlashes = (n) =>
    n.replaceAll(/\\./g, (m) => {
        if (m[1] === 'n') {
            return '\n';
        }
        if (m[1] === 't') {
            return '\t';
        }
        if (m[1] === 'r') {
            return '\r';
        }
        return m[1];
    });
return {evaluate,evaluateStmt,unwrapList,constrFn,sanitize,sanMap,evalPat,kwds,unescapeSlashes}})();
Object.assign($env, $prelude);
const {"pint": pint,"pbool": pbool} = $env.evaluateStmt({"0":"prim","1":{"0":{"0":"pint","1":{"0":{"0":"int","1":537,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":536,"type":",,"},"1":{"0":{"0":"pbool","1":{"0":{"0":"bool","1":540,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":539,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"pany": pany,"pvar": pvar,"pprim": pprim,"pstr": pstr,"pcon": pcon} = $env.evaluateStmt({"0":"pat","1":{"0":{"0":"pany","1":{"0":{"0":"int","1":5055,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":545,"type":",,"},"1":{"0":{"0":"pvar","1":{"0":{"0":"string","1":548,"type":"tcon"},"1":{"0":{"0":"int","1":5056,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":547,"type":",,"},"1":{"0":{"0":"pprim","1":{"0":{"0":"prim","1":3937,"type":"tcon"},"1":{"0":{"0":"int","1":5057,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":3936,"type":",,"},"1":{"0":{"0":"pstr","1":{"0":{"0":"string","1":4151,"type":"tcon"},"1":{"0":{"0":"int","1":5058,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4150,"type":",,"},"1":{"0":{"0":"pcon","1":{"0":{"0":"string","1":551,"type":"tcon"},"1":{"0":{"0":"int","1":5302,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":553,"type":"tcon"},"1":{"0":"pat","1":554,"type":"tcon"},"2":552,"type":"tapp"},"1":{"0":{"0":"int","1":5059,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":550,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"tvar": tvar,"tapp": tapp,"tcon": tcon} = $env.evaluateStmt({"0":"type","1":{"0":{"0":"tvar","1":{"0":{"0":"string","1":560,"type":"tcon"},"1":{"0":{"0":"int","1":5061,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":559,"type":",,"},"1":{"0":{"0":"tapp","1":{"0":{"0":"type","1":563,"type":"tcon"},"1":{"0":{"0":"type","1":564,"type":"tcon"},"1":{"0":{"0":"int","1":5060,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":562,"type":",,"},"1":{"0":{"0":"tcon","1":{"0":{"0":"string","1":567,"type":"tcon"},"1":{"0":{"0":"int","1":5062,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":566,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"sdeftype": sdeftype,"sdef": sdef,"sexpr": sexpr} = $env.evaluateStmt({"0":"stmt","1":{"0":{"0":"sdeftype","1":{"0":{"0":"string","1":663,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":665,"type":"tcon"},"1":{"0":{"0":{"0":{"0":",,","1":667,"type":"tcon"},"1":{"0":"string","1":668,"type":"tcon"},"2":666,"type":"tapp"},"1":{"0":{"0":"list","1":670,"type":"tcon"},"1":{"0":"type","1":671,"type":"tcon"},"2":669,"type":"tapp"},"2":666,"type":"tapp"},"1":{"0":"int","1":4901,"type":"tcon"},"2":666,"type":"tapp"},"2":664,"type":"tapp"},"1":{"0":{"0":"int","1":5063,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":662,"type":",,"},"1":{"0":{"0":"sdef","1":{"0":{"0":"string","1":674,"type":"tcon"},"1":{"0":{"0":"expr","1":675,"type":"tcon"},"1":{"0":{"0":"int","1":5064,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":673,"type":",,"},"1":{"0":{"0":"sexpr","1":{"0":{"0":"expr","1":678,"type":"tcon"},"1":{"0":{"0":"int","1":5065,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":677,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"nil": nil,"cons": cons} = $env.evaluateStmt({"0":"list","1":{"0":{"0":"nil","1":{"type":"nil"},"2":616,"type":",,"},"1":{"0":{"0":"cons","1":{"0":{"0":"a","1":606,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":610,"type":"tcon"},"1":{"0":"a","1":612,"type":"tcon"},"2":608,"type":"tapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":604,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const snd = $env.evaluateStmt({"0":"snd","1":{"0":{"0":{"0":"tuple","1":803,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":{"0":{"0":",","1":808,"2":{"0":{"0":809,"type":"pany"},"1":{"0":{"0":"v","1":810,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":807,"type":"pcon"},"1":{"0":"tuple","1":811,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"1":{"0":"v","1":812,"type":"evar"},"2":804,"type":"elet"},"2":772,"type":"elambda"},"2":772,"type":"sdef"}, $env)
const fst = $env.evaluateStmt({"0":"fst","1":{"0":{"0":{"0":"tuple","1":817,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":{"0":{"0":",","1":822,"2":{"0":{"0":"v","1":823,"type":"pvar"},"1":{"0":{"0":824,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":821,"type":"pcon"},"1":{"0":"tuple","1":825,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"1":{"0":"v","1":826,"type":"evar"},"2":818,"type":"elet"},"2":813,"type":"elambda"},"2":813,"type":"sdef"}, $env)
const join = $env.evaluateStmt({"0":"join","1":{"0":{"0":{"0":"sep","1":2016,"type":"pvar"},"1":{"0":{"0":"items","1":2018,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"items","1":2024,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2026,"2":{"type":"nil"},"3":2026,"type":"pcon"},"1":{"0":"","1":{"type":"nil"},"2":2028,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"cons","1":2032,"2":{"0":{"0":"one","1":2034,"type":"pvar"},"1":{"0":{"0":"rest","1":2036,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2032,"type":"pcon"},"1":{"0":{"0":"rest","1":2180,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2182,"2":{"type":"nil"},"3":2182,"type":"pcon"},"1":{"0":"one","1":2184,"type":"evar"},"type":","},"1":{"0":{"0":{"0":2188,"type":"pany"},"1":{"0":"","1":{"0":{"0":{"0":"one","1":4812,"type":"evar"},"1":"","2":4813,"type":",,"},"1":{"0":{"0":{"0":"sep","1":4810,"type":"evar"},"1":"","2":4811,"type":",,"},"1":{"0":{"0":{"0":{"0":"join","1":4816,"type":"evar"},"1":{"0":{"0":"sep","1":4817,"type":"evar"},"1":{"0":{"0":"rest","1":4818,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":4815,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4808,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2176,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2020,"type":"ematch"},"2":2008,"type":"elambda"},"2":2008,"type":"sdef"}, $env)
const map = $env.evaluateStmt({"0":"map","1":{"0":{"0":{"0":"values","1":2262,"type":"pvar"},"1":{"0":{"0":"f","1":2264,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"values","1":2270,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2272,"2":{"type":"nil"},"3":2272,"type":"pcon"},"1":{"0":"nil","1":2274,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":2276,"2":{"0":{"0":"one","1":2278,"type":"pvar"},"1":{"0":{"0":"rest","1":2280,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2276,"type":"pcon"},"1":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"f","1":2292,"type":"evar"},"1":{"0":{"0":"one","1":2294,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"map","1":2304,"type":"evar"},"1":{"0":{"0":"rest","1":2306,"type":"evar"},"1":{"0":{"0":"f","1":2308,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2266,"type":"ematch"},"2":2248,"type":"elambda"},"2":2248,"type":"sdef"}, $env)
const foldl = $env.evaluateStmt({"0":"foldl","1":{"0":{"0":{"0":"init","1":2320,"type":"pvar"},"1":{"0":{"0":"items","1":2322,"type":"pvar"},"1":{"0":{"0":"f","1":2324,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"items","1":2330,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2332,"2":{"type":"nil"},"3":2332,"type":"pcon"},"1":{"0":"init","1":2334,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":2336,"2":{"0":{"0":"one","1":2338,"type":"pvar"},"1":{"0":{"0":"rest","1":2340,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2336,"type":"pcon"},"1":{"0":{"0":"foldl","1":2354,"type":"evar"},"1":{"0":{"0":{"0":"f","1":2358,"type":"evar"},"1":{"0":{"0":"init","1":2360,"type":"evar"},"1":{"0":{"0":"one","1":2362,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"rest","1":2364,"type":"evar"},"1":{"0":{"0":"f","1":2366,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2326,"type":"ematch"},"2":2312,"type":"elambda"},"2":2312,"type":"sdef"}, $env)
const mapi = $env.evaluateStmt({"0":"mapi","1":{"0":{"0":{"0":"i","1":2433,"type":"pvar"},"1":{"0":{"0":"values","1":2460,"type":"pvar"},"1":{"0":{"0":"f","1":2434,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"values","1":2437,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2438,"2":{"type":"nil"},"3":2438,"type":"pcon"},"1":{"0":"nil","1":2439,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":2440,"2":{"0":{"0":"one","1":2441,"type":"pvar"},"1":{"0":{"0":"rest","1":2442,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2440,"type":"pcon"},"1":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"f","1":2448,"type":"evar"},"1":{"0":{"0":"i","1":2449,"type":"evar"},"1":{"0":{"0":"one","1":2462,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"mapi","1":2454,"type":"evar"},"1":{"0":{"0":{"0":"+","1":2466,"type":"evar"},"1":{"0":{"0":{"0":1,"1":2468,"type":"pint"},"1":2468,"type":"eprim"},"1":{"0":{"0":"i","1":2470,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"rest","1":2455,"type":"evar"},"1":{"0":{"0":"f","1":2456,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2435,"type":"ematch"},"2":2402,"type":"elambda"},"2":2402,"type":"sdef"}, $env)
const foldr = $env.evaluateStmt({"0":"foldr","1":{"0":{"0":{"0":"init","1":2687,"type":"pvar"},"1":{"0":{"0":"items","1":2688,"type":"pvar"},"1":{"0":{"0":"f","1":2689,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"items","1":2692,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2693,"2":{"type":"nil"},"3":2693,"type":"pcon"},"1":{"0":"init","1":2694,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":2695,"2":{"0":{"0":"one","1":2696,"type":"pvar"},"1":{"0":{"0":"rest","1":2697,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2695,"type":"pcon"},"1":{"0":{"0":"f","1":2712,"type":"evar"},"1":{"0":{"0":{"0":"foldr","1":2716,"type":"evar"},"1":{"0":{"0":"init","1":2718,"type":"evar"},"1":{"0":{"0":"rest","1":2720,"type":"evar"},"1":{"0":{"0":"f","1":2722,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"one","1":2724,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2690,"type":"ematch"},"2":2658,"type":"elambda"},"2":2658,"type":"sdef"}, $env)
const replaces = $env.evaluateStmt({"0":"replaces","1":{"0":{"0":{"0":"target","1":2874,"type":"pvar"},"1":{"0":{"0":"repl","1":2876,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"repl","1":2882,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":2884,"2":{"type":"nil"},"3":2884,"type":"pcon"},"1":{"0":"target","1":2886,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":2952,"2":{"0":{"0":"one","1":2954,"type":"pvar"},"1":{"0":{"0":"rest","1":2956,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2952,"type":"pcon"},"1":{"0":{"0":"one","1":2968,"type":"evar"},"1":{"0":{"0":{"0":",","1":2972,"2":{"0":{"0":"find","1":2974,"type":"pvar"},"1":{"0":{"0":"nw","1":2976,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2970,"type":"pcon"},"1":{"0":{"0":"replaces","1":2986,"type":"evar"},"1":{"0":{"0":{"0":"replace-all","1":2988,"type":"evar"},"1":{"0":{"0":"target","1":2989,"type":"evar"},"1":{"0":{"0":"find","1":2990,"type":"evar"},"1":{"0":{"0":"nw","1":2991,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"rest","1":2992,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"2":2964,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2878,"type":"ematch"},"2":2864,"type":"elambda"},"2":2864,"type":"sdef"}, $env)
const escape_string = $env.evaluateStmt({"0":"escape-string","1":{"0":{"0":{"0":"string","1":3312,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"replaces","1":3316,"type":"evar"},"1":{"0":{"0":"string","1":3318,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3324,"type":"evar"},"1":{"0":{"0":"\\\\","1":{"type":"nil"},"2":3326,"type":"estr"},"1":{"0":{"0":"\\\\\\\\","1":{"type":"nil"},"2":3330,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3336,"type":"evar"},"1":{"0":{"0":"\\n","1":{"type":"nil"},"2":3338,"type":"estr"},"1":{"0":{"0":"\\\\n","1":{"type":"nil"},"2":3342,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":3348,"type":"evar"},"1":{"0":{"0":"\\\"","1":{"type":"nil"},"2":3350,"type":"estr"},"1":{"0":{"0":"\\\\\"","1":{"type":"nil"},"2":3354,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4475,"type":"evar"},"1":{"0":{"0":"`","1":{"type":"nil"},"2":4476,"type":"estr"},"1":{"0":{"0":"\\\\`","1":{"type":"nil"},"2":4478,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3320,"type":"evar"},"1":{"0":{"0":{"0":",","1":4481,"type":"evar"},"1":{"0":{"0":"$","1":{"type":"nil"},"2":4482,"type":"estr"},"1":{"0":{"0":"\\\\$","1":{"type":"nil"},"2":4484,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"nil","1":3320,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":3320,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"2":3306,"type":"elambda"},"2":3306,"type":"sdef"}, $env)
const unescape_string = $env.evaluateStmt({"0":"unescape-string","1":{"0":{"0":{"0":"string","1":3364,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"replaces","1":3368,"type":"evar"},"1":{"0":{"0":"string","1":3370,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4617,"type":"evar"},"1":{"0":{"0":"\\\\n","1":{"type":"nil"},"2":4618,"type":"estr"},"1":{"0":{"0":"\\n","1":{"type":"nil"},"2":4620,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":",","1":4536,"type":"evar"},"1":{"0":{"0":"\\\\\\\\","1":{"type":"nil"},"2":4537,"type":"estr"},"1":{"0":{"0":"\\\\","1":{"type":"nil"},"2":4539,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3372,"type":"evar"},"1":{"0":{"0":{"0":",","1":3376,"type":"evar"},"1":{"0":{"0":"\\\\\"","1":{"type":"nil"},"2":3378,"type":"estr"},"1":{"0":{"0":"\\\"","1":{"type":"nil"},"2":3382,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"nil","1":3372,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":3372,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"2":3358,"type":"elambda"},"2":3358,"type":"sdef"}, $env)
const x = $env.evaluateStmt({"0":"x","1":{"0":{"0":123,"1":4664,"type":"pint"},"1":4664,"type":"eprim"},"2":4659,"type":"sdef"}, $env)
const {"eprim": eprim,"estr": estr,"evar": evar,"equot": equot,"elambda": elambda,"eapp": eapp,"elet": elet,"ematch": ematch} = $env.evaluateStmt({"0":"expr","1":{"0":{"0":"eprim","1":{"0":{"0":"prim","1":4728,"type":"tcon"},"1":{"0":{"0":"int","1":4729,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4727,"type":",,"},"1":{"0":{"0":"estr","1":{"0":{"0":"string","1":4733,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":4735,"type":"tcon"},"1":{"0":{"0":{"0":{"0":",,","1":4737,"type":"tcon"},"1":{"0":"expr","1":4738,"type":"tcon"},"2":4736,"type":"tapp"},"1":{"0":"string","1":4739,"type":"tcon"},"2":4736,"type":"tapp"},"1":{"0":"int","1":4740,"type":"tcon"},"2":4736,"type":"tapp"},"2":4734,"type":"tapp"},"1":{"0":{"0":"int","1":4741,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4732,"type":",,"},"1":{"0":{"0":"evar","1":{"0":{"0":"string","1":4745,"type":"tcon"},"1":{"0":{"0":"int","1":4746,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4744,"type":",,"},"1":{"0":{"0":"equot","1":{"0":{"0":"quot","1":4750,"type":"tcon"},"1":{"0":{"0":"int","1":4751,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4749,"type":",,"},"1":{"0":{"0":"elambda","1":{"0":{"0":{"0":"list","1":4756,"type":"tcon"},"1":{"0":"pat","1":4757,"type":"tcon"},"2":4755,"type":"tapp"},"1":{"0":{"0":"expr","1":4758,"type":"tcon"},"1":{"0":{"0":"int","1":4759,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4754,"type":",,"},"1":{"0":{"0":"eapp","1":{"0":{"0":"expr","1":4763,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":4765,"type":"tcon"},"1":{"0":"expr","1":4766,"type":"tcon"},"2":4764,"type":"tapp"},"1":{"0":{"0":"int","1":4767,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4762,"type":",,"},"1":{"0":{"0":"elet","1":{"0":{"0":{"0":"list","1":4772,"type":"tcon"},"1":{"0":{"0":{"0":",","1":4774,"type":"tcon"},"1":{"0":"pat","1":4775,"type":"tcon"},"2":4773,"type":"tapp"},"1":{"0":"expr","1":4776,"type":"tcon"},"2":4773,"type":"tapp"},"2":4771,"type":"tapp"},"1":{"0":{"0":"expr","1":4777,"type":"tcon"},"1":{"0":{"0":"int","1":4778,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4770,"type":",,"},"1":{"0":{"0":"ematch","1":{"0":{"0":"expr","1":4782,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":4784,"type":"tcon"},"1":{"0":{"0":{"0":",","1":4786,"type":"tcon"},"1":{"0":"pat","1":4787,"type":"tcon"},"2":4785,"type":"tapp"},"1":{"0":"expr","1":4788,"type":"tcon"},"2":4785,"type":"tapp"},"2":4783,"type":"tapp"},"1":{"0":{"0":"int","1":5279,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4781,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"quot/expr": quot$slexpr,"quot/stmt": quot$slstmt,"quot/type": quot$sltype,"quot/pat": quot$slpat,"quot/quot": quot$slquot} = $env.evaluateStmt({"0":"quot","1":{"0":{"0":"quot/expr","1":{"0":{"0":"expr","1":4794,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4793,"type":",,"},"1":{"0":{"0":"quot/stmt","1":{"0":{"0":"stmt","1":4797,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4796,"type":",,"},"1":{"0":{"0":"quot/type","1":{"0":{"0":"type","1":4800,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4799,"type":",,"},"1":{"0":{"0":"quot/pat","1":{"0":{"0":"pat","1":4803,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4802,"type":",,"},"1":{"0":{"0":"quot/quot","1":{"0":{"0":"cst","1":4806,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4805,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const {"cst/identifier": cst$slidentifier,"cst/list": cst$sllist,"cst/array": cst$slarray,"cst/record": cst$slrecord,"cst/spread": cst$slspread,"cst/string": cst$slstring} = $env.evaluateStmt({"0":"cst","1":{"0":{"0":"cst/identifier","1":{"0":{"0":"string","1":4825,"type":"tcon"},"1":{"0":{"0":"int","1":4826,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4824,"type":",,"},"1":{"0":{"0":"cst/list","1":{"0":{"0":{"0":"list","1":4830,"type":"tcon"},"1":{"0":"cst","1":4831,"type":"tcon"},"2":4829,"type":"tapp"},"1":{"0":{"0":"int","1":4832,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4828,"type":",,"},"1":{"0":{"0":"cst/array","1":{"0":{"0":{"0":"list","1":4836,"type":"tcon"},"1":{"0":"cst","1":4837,"type":"tcon"},"2":4835,"type":"tapp"},"1":{"0":{"0":"int","1":4838,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4834,"type":",,"},"1":{"0":{"0":"cst/record","1":{"0":{"0":{"0":"list","1":4842,"type":"tcon"},"1":{"0":"cst","1":4843,"type":"tcon"},"2":4841,"type":"tapp"},"1":{"0":{"0":"int","1":4844,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4840,"type":",,"},"1":{"0":{"0":"cst/spread","1":{"0":{"0":"cst","1":4847,"type":"tcon"},"1":{"0":{"0":"int","1":4848,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4846,"type":",,"},"1":{"0":{"0":"cst/string","1":{"0":{"0":"string","1":4851,"type":"tcon"},"1":{"0":{"0":{"0":"list","1":4853,"type":"tcon"},"1":{"0":{"0":{"0":{"0":",,","1":4855,"type":"tcon"},"1":{"0":"cst","1":4856,"type":"tcon"},"2":4854,"type":"tapp"},"1":{"0":"string","1":4857,"type":"tcon"},"2":4854,"type":"tapp"},"1":{"0":"int","1":4858,"type":"tcon"},"2":4854,"type":"tapp"},"2":4852,"type":"tapp"},"1":{"0":{"0":"int","1":4859,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4850,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const $pl$pl$pl = $env.evaluateStmt({"0":"+++","1":{"0":{"0":{"0":"items","1":4875,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"items","1":4878,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":4879,"2":{"type":"nil"},"3":4879,"type":"pcon"},"1":{"0":"","1":{"type":"nil"},"2":4880,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"cons","1":4882,"2":{"0":{"0":"one","1":4884,"type":"pvar"},"1":{"0":{"0":"nil","1":4882,"2":{"type":"nil"},"3":4882,"type":"pcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4882,"type":"pcon"},"1":{"0":"one","1":4886,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":4887,"2":{"0":{"0":"one","1":4888,"type":"pvar"},"1":{"0":{"0":"rest","1":4889,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4887,"type":"pcon"},"1":{"0":"","1":{"0":{"0":{"0":"one","1":4895,"type":"evar"},"1":"","2":4896,"type":",,"},"1":{"0":{"0":{"0":{"0":"+++","1":4899,"type":"evar"},"1":{"0":{"0":"rest","1":4900,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":4898,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4893,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4876,"type":"ematch"},"2":4870,"type":"elambda"},"2":4870,"type":"sdef"}, $env)
const {"some": some,"none": none} = $env.evaluateStmt({"0":"option","1":{"0":{"0":"some","1":{"0":{"0":"a","1":4953,"type":"tcon"},"1":{"type":"nil"},"type":"cons"},"2":4952,"type":",,"},"1":{"0":{"0":"none","1":{"type":"nil"},"2":4955,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"sdeftype"}, $env)
const maybe_parens = $env.evaluateStmt({"0":"maybe-parens","1":{"0":{"0":{"0":"inner","1":5123,"type":"pvar"},"1":{"0":{"0":"parens","1":5124,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"parens","1":5127,"type":"evar"},"1":{"0":{"0":{"0":{"0":true,"1":5125,"type":"pbool"},"1":5125,"type":"pprim"},"1":{"0":"(","1":{"0":{"0":{"0":"inner","1":5130,"type":"evar"},"1":")","2":5131,"type":",,"},"1":{"type":"nil"},"type":"cons"},"2":5128,"type":"estr"},"type":","},"1":{"0":{"0":{"0":5125,"type":"pany"},"1":{"0":"inner","1":5132,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"ematch"},"2":5116,"type":"elambda"},"2":5116,"type":"sdef"}, $env)
const needs_parens = $env.evaluateStmt({"0":"needs-parens","1":{"0":{"0":{"0":"expr","1":5138,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"expr","1":5141,"type":"evar"},"1":{"0":{"0":{"0":"elambda","1":5143,"2":{"0":{"0":5144,"type":"pany"},"1":{"0":{"0":5145,"type":"pany"},"1":{"0":{"0":5146,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":5142,"type":"pcon"},"1":{"0":{"0":true,"1":5147,"type":"pbool"},"1":5147,"type":"eprim"},"type":","},"1":{"0":{"0":{"0":"eprim","1":5149,"2":{"0":{"0":5150,"type":"pany"},"1":{"0":{"0":5151,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":5148,"type":"pcon"},"1":{"0":{"0":true,"1":5152,"type":"pbool"},"1":5152,"type":"eprim"},"type":","},"1":{"0":{"0":{"0":5153,"type":"pany"},"1":{"0":{"0":false,"1":5154,"type":"pbool"},"1":5154,"type":"eprim"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":5139,"type":"ematch"},"2":5133,"type":"elambda"},"2":5133,"type":"sdef"}, $env)
const compile_pat = $env.evaluateStmt({"0":"compile-pat","1":{"0":{"0":{"0":"pat","1":4084,"type":"pvar"},"1":{"0":{"0":"target","1":4133,"type":"pvar"},"1":{"0":{"0":"inner","1":4134,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"pat","1":4087,"type":"evar"},"1":{"0":{"0":{"0":"pany","1":4089,"2":{"0":{"0":5070,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"3":4088,"type":"pcon"},"1":{"0":"inner","1":4090,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"pprim","1":4094,"2":{"0":{"0":"prim","1":4095,"type":"pvar"},"1":{"0":{"0":5071,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4092,"type":"pcon"},"1":{"0":{"0":"prim","1":4098,"type":"evar"},"1":{"0":{"0":{"0":"pint","1":4100,"2":{"0":{"0":"int","1":4101,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":4099,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4224,"type":"evar"},"1":" === ","2":4225,"type":",,"},"1":{"0":{"0":{"0":{"0":"int-to-string","1":4138,"type":"evar"},"1":{"0":{"0":"int","1":4906,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":") {\\n","2":4139,"type":",,"},"1":{"0":{"0":{"0":"inner","1":4140,"type":"evar"},"1":"\\n}","2":4141,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4105,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pbool","1":4112,"2":{"0":{"0":"bool","1":4113,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":4104,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4226,"type":"evar"},"1":" === ","2":4227,"type":",,"},"1":{"0":{"0":{"0":{"0":"bool","1":4908,"type":"evar"},"1":{"0":{"0":{"0":{"0":true,"1":4907,"type":"pbool"},"1":4907,"type":"pprim"},"1":{"0":"true","1":{"type":"nil"},"2":4909,"type":"estr"},"type":","},"1":{"0":{"0":{"0":4907,"type":"pany"},"1":{"0":"false","1":{"type":"nil"},"2":4911,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"ematch"},"1":") {\\n","2":4144,"type":",,"},"1":{"0":{"0":{"0":"inner","1":4145,"type":"evar"},"1":"\\n}","2":4146,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4114,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4096,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"pstr","1":4152,"2":{"0":{"0":"str","1":4153,"type":"pvar"},"1":{"0":{"0":5072,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4148,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4230,"type":"evar"},"1":" === \\\"","2":4231,"type":",,"},"1":{"0":{"0":{"0":"str","1":4156,"type":"evar"},"1":"\\\"){\\n","2":4157,"type":",,"},"1":{"0":{"0":{"0":"inner","1":4158,"type":"evar"},"1":"\\n}","2":4159,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4154,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pvar","1":4130,"2":{"0":{"0":"name","1":4131,"type":"pvar"},"1":{"0":{"0":5073,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4129,"type":"pcon"},"1":{"0":"{\\nlet ","1":{"0":{"0":{"0":{"0":"sanitize","1":4473,"type":"evar"},"1":{"0":{"0":"name","1":4161,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":" = ","2":4162,"type":",,"},"1":{"0":{"0":{"0":"target","1":4228,"type":"evar"},"1":";\\n","2":4229,"type":",,"},"1":{"0":{"0":{"0":"inner","1":4163,"type":"evar"},"1":"\\n}","2":4164,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4132,"type":"estr"},"type":","},"1":{"0":{"0":{"0":"pcon","1":4166,"2":{"0":{"0":"name","1":4167,"type":"pvar"},"1":{"0":{"0":5303,"type":"pany"},"1":{"0":{"0":"args","1":4168,"type":"pvar"},"1":{"0":{"0":5074,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"3":4165,"type":"pcon"},"1":{"0":"if (","1":{"0":{"0":{"0":"target","1":4285,"type":"evar"},"1":".type === \\\"","2":4286,"type":",,"},"1":{"0":{"0":{"0":"name","1":4287,"type":"evar"},"1":"\\\") {\\n","2":4288,"type":",,"},"1":{"0":{"0":{"0":{"0":"pat-loop","1":4291,"type":"evar"},"1":{"0":{"0":"target","1":4914,"type":"evar"},"1":{"0":{"0":"args","1":4292,"type":"evar"},"1":{"0":{"0":{"0":0,"1":4293,"type":"pint"},"1":4293,"type":"eprim"},"1":{"0":{"0":"inner","1":4294,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":"\\n}","2":4290,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4283,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4085,"type":"ematch"},"2":4079,"type":"elambda"},"2":4079,"type":"sdef"}, $env)

const pat_loop = $env.evaluateStmt({"0":"pat-loop","1":{"0":{"0":{"0":"target","1":4255,"type":"pvar"},"1":{"0":{"0":"args","1":4302,"type":"pvar"},"1":{"0":{"0":"i","1":4256,"type":"pvar"},"1":{"0":{"0":"inner","1":4281,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"args","1":4259,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":4260,"2":{"type":"nil"},"3":4260,"type":"pcon"},"1":{"0":"inner","1":4261,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"cons","1":4262,"2":{"0":{"0":"arg","1":4263,"type":"pvar"},"1":{"0":{"0":"rest","1":4264,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4262,"type":"pcon"},"1":{"0":{"0":"compile-pat","1":4269,"type":"evar"},"1":{"0":{"0":"arg","1":4270,"type":"evar"},"1":{"0":{"0":"","1":{"0":{"0":{"0":"target","1":4297,"type":"evar"},"1":"[","2":4298,"type":",,"},"1":{"0":{"0":{"0":{"0":"int-to-string","1":4295,"type":"evar"},"1":{"0":{"0":"i","1":4904,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"]","2":4296,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4271,"type":"estr"},"1":{"0":{"0":{"0":"pat-loop","1":4274,"type":"evar"},"1":{"0":{"0":"target","1":4275,"type":"evar"},"1":{"0":{"0":"rest","1":4301,"type":"evar"},"1":{"0":{"0":{"0":"+","1":4277,"type":"evar"},"1":{"0":{"0":"i","1":4278,"type":"evar"},"1":{"0":{"0":{"0":1,"1":4279,"type":"pint"},"1":4279,"type":"eprim"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"inner","1":4282,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4257,"type":"ematch"},"2":4251,"type":"elambda"},"2":4251,"type":"sdef"}, $env)
const literal_constr = $env.evaluateStmt({"0":"literal-constr","1":{"0":{"0":{"0":"name","1":3126,"type":"pvar"},"1":{"0":{"0":"args","1":3128,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"+++","1":3132,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"({type: \\\"","1":{"type":"nil"},"2":3166,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"name","1":3168,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"\"","1":{"type":"nil"},"2":3169,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"+++","1":3172,"type":"evar"},"1":{"0":{"0":{"0":"mapi","1":3174,"type":"evar"},"1":{"0":{"0":{"0":0,"1":3175,"type":"pint"},"1":3175,"type":"eprim"},"1":{"0":{"0":"args","1":3176,"type":"evar"},"1":{"0":{"0":{"0":{"0":"i","1":3180,"type":"pvar"},"1":{"0":{"0":"arg","1":3181,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":", ","1":{"0":{"0":{"0":{"0":"int-to-string","1":4866,"type":"evar"},"1":{"0":{"0":"i","1":4867,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":": ","2":4865,"type":",,"},"1":{"0":{"0":{"0":"arg","1":4868,"type":"evar"},"1":"","2":4869,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4862,"type":"estr"},"2":3177,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":3134,"type":"evar"},"1":{"0":{"0":"})","1":{"type":"nil"},"2":3195,"type":"estr"},"1":{"0":{"0":"nil","1":3134,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":3134,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":3118,"type":"elambda"},"2":3118,"type":"sdef"}, $env)
const pat_as_arg = $env.evaluateStmt({"0":"pat-as-arg","1":{"0":{"0":{"0":"pat","1":4931,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"pat","1":4934,"type":"evar"},"1":{"0":{"0":{"0":"pany","1":4936,"2":{"0":{"0":5075,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"3":4935,"type":"pcon"},"1":{"0":"none","1":4937,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"pprim","1":4940,"2":{"0":{"0":4941,"type":"pany"},"1":{"0":{"0":5076,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4939,"type":"pcon"},"1":{"0":"none","1":4942,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"pstr","1":4956,"2":{"0":{"0":4957,"type":"pany"},"1":{"0":{"0":5077,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4943,"type":"pcon"},"1":{"0":"none","1":4958,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"pvar","1":4960,"2":{"0":{"0":"name","1":4961,"type":"pvar"},"1":{"0":{"0":5053,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4959,"type":"pcon"},"1":{"0":{"0":"some","1":4963,"type":"evar"},"1":{"0":{"0":{"0":"sanitize","1":4964,"type":"evar"},"1":{"0":{"0":"name","1":5228,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"pcon","1":4966,"2":{"0":{"0":4967,"type":"pany"},"1":{"0":{"0":5304,"type":"pany"},"1":{"0":{"0":"args","1":4968,"type":"pvar"},"1":{"0":{"0":5054,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"3":4965,"type":"pcon"},"1":{"0":{"0":{"0":"foldl","1":4970,"type":"evar"},"1":{"0":{"0":{"0":",","1":4972,"type":"evar"},"1":{"0":{"0":{"0":0,"1":4973,"type":"pint"},"1":4973,"type":"eprim"},"1":{"0":{"0":"nil","1":4974,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"args","1":4975,"type":"evar"},"1":{"0":{"0":{"0":{"0":",","1":4981,"2":{"0":{"0":"i","1":4982,"type":"pvar"},"1":{"0":{"0":"res","1":4983,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4980,"type":"pcon"},"1":{"0":{"0":"arg","1":4984,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":",","1":5005,"type":"evar"},"1":{"0":{"0":{"0":"+","1":5007,"type":"evar"},"1":{"0":{"0":"i","1":5008,"type":"evar"},"1":{"0":{"0":{"0":1,"1":5009,"type":"pint"},"1":5009,"type":"eprim"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":{"0":"pat-as-arg","1":4988,"type":"evar"},"1":{"0":{"0":"arg","1":4989,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"none","1":4991,"2":{"type":"nil"},"3":4990,"type":"pcon"},"1":{"0":"res","1":4992,"type":"evar"},"type":","},"1":{"0":{"0":{"0":"some","1":4996,"2":{"0":{"0":"arg","1":4997,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":4995,"type":"pcon"},"1":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"","1":{"0":{"0":{"0":{"0":"int-to-string","1":5036,"type":"evar"},"1":{"0":{"0":"i","1":5037,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":": ","2":5035,"type":",,"},"1":{"0":{"0":{"0":"arg","1":4999,"type":"evar"},"1":"","2":5033,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":5031,"type":"estr"},"1":{"0":{"0":"res","1":5000,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4985,"type":"ematch"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"2":4977,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":",","1":5017,"2":{"0":{"0":5018,"type":"pany"},"1":{"0":{"0":"nil","1":5012,"2":{"type":"nil"},"3":5012,"type":"pcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":5016,"type":"pcon"},"1":{"0":"none","1":5013,"type":"evar"},"type":","},"1":{"0":{"0":{"0":",","1":5014,"2":{"0":{"0":5020,"type":"pany"},"1":{"0":{"0":"args","1":5021,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":5019,"type":"pcon"},"1":{"0":{"0":"some","1":5022,"type":"evar"},"1":{"0":{"0":"{","1":{"0":{"0":{"0":{"0":"join","1":5027,"type":"evar"},"1":{"0":{"0":", ","1":{"type":"nil"},"2":5028,"type":"estr"},"1":{"0":{"0":"args","1":5030,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":"}","2":5026,"type":",,"},"1":{"type":"nil"},"type":"cons"},"2":5023,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":5010,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":5048,"type":"pany"},"1":{"0":{"0":"fatal","1":5050,"type":"evar"},"1":{"0":{"0":"No pat ","1":{"0":{"0":{"0":{"0":"jsonify","1":5238,"type":"evar"},"1":{"0":{"0":"pat","1":5241,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":5239,"type":",,"},"1":{"type":"nil"},"type":"cons"},"2":5051,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":4932,"type":"ematch"},"2":4926,"type":"elambda"},"2":4926,"type":"sdef"}, $env)
const compile = $env.evaluateStmt({"0":"compile","1":{"0":{"0":{"0":"expr","1":1745,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"expr","1":1748,"type":"evar"},"1":{"0":{"0":{"0":"estr","1":4379,"2":{"0":{"0":"first","1":4381,"type":"pvar"},"1":{"0":{"0":"tpls","1":4382,"type":"pvar"},"1":{"0":{"0":4915,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":4378,"type":"pcon"},"1":{"0":{"0":"tpls","1":4450,"type":"evar"},"1":{"0":{"0":{"0":"nil","1":4451,"2":{"type":"nil"},"3":4451,"type":"pcon"},"1":{"0":"\\\"","1":{"0":{"0":{"0":{"0":"escape-string","1":4456,"type":"evar"},"1":{"0":{"0":{"0":"unescapeString","1":4458,"type":"evar"},"1":{"0":{"0":"first","1":4459,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"\\\"","2":4455,"type":",,"},"1":{"type":"nil"},"type":"cons"},"2":4452,"type":"estr"},"type":","},"1":{"0":{"0":{"0":4460,"type":"pany"},"1":{"0":"`","1":{"0":{"0":{"0":{"0":"escape-string","1":4384,"type":"evar"},"1":{"0":{"0":{"0":"unescapeString","1":4389,"type":"evar"},"1":{"0":{"0":"first","1":4390,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":4385,"type":",,"},"1":{"0":{"0":{"0":{"0":"join","1":4401,"type":"evar"},"1":{"0":{"0":"","1":{"type":"nil"},"2":4402,"type":"estr"},"1":{"0":{"0":{"0":"map","1":4405,"type":"evar"},"1":{"0":{"0":"tpls","1":4406,"type":"evar"},"1":{"0":{"0":{"0":{"0":"item","1":4415,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":{"0":{"0":",,","1":4420,"2":{"0":{"0":"expr","1":4421,"type":"pvar"},"1":{"0":{"0":"suffix","1":4422,"type":"pvar"},"1":{"0":{"0":4925,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":4419,"type":"pcon"},"1":{"0":"item","1":4423,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"1":{"0":"${","1":{"0":{"0":{"0":{"0":"compile","1":4428,"type":"evar"},"1":{"0":{"0":"expr","1":4429,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"}","2":4427,"type":",,"},"1":{"0":{"0":{"0":{"0":"escape-string","1":4433,"type":"evar"},"1":{"0":{"0":{"0":"unescape-string","1":4435,"type":"evar"},"1":{"0":{"0":"suffix","1":4430,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":4431,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4424,"type":"estr"},"2":4414,"type":"elet"},"2":4407,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":"`","2":4400,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4380,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4446,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"eprim","1":1750,"2":{"0":{"0":"prim","1":1751,"type":"pvar"},"1":{"0":{"0":4916,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":1749,"type":"pcon"},"1":{"0":{"0":"prim","1":1754,"type":"evar"},"1":{"0":{"0":{"0":"pint","1":1773,"2":{"0":{"0":"int","1":1774,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":1772,"type":"pcon"},"1":{"0":{"0":"int-to-string","1":1776,"type":"evar"},"1":{"0":{"0":"int","1":1777,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"pbool","1":1779,"2":{"0":{"0":"bool","1":1780,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":1778,"type":"pcon"},"1":{"0":{"0":"bool","1":1783,"type":"evar"},"1":{"0":{"0":{"0":{"0":true,"1":4075,"type":"pbool"},"1":4075,"type":"pprim"},"1":{"0":"true","1":{"type":"nil"},"2":1784,"type":"estr"},"type":","},"1":{"0":{"0":{"0":{"0":false,"1":4076,"type":"pbool"},"1":4076,"type":"pprim"},"1":{"0":"false","1":{"type":"nil"},"2":1786,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1781,"type":"ematch"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1752,"type":"ematch"},"type":","},"1":{"0":{"0":{"0":"evar","1":1789,"2":{"0":{"0":"name","1":1790,"type":"pvar"},"1":{"0":{"0":4917,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":1788,"type":"pcon"},"1":{"0":{"0":"sanitize","1":1792,"type":"evar"},"1":{"0":{"0":"name","1":1793,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"equot","1":2826,"2":{"0":{"0":"inner","1":2828,"type":"pvar"},"1":{"0":{"0":4918,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":2824,"type":"pcon"},"1":{"0":{"0":"jsonify","1":2832,"type":"evar"},"1":{"0":{"0":"inner","1":2834,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"elambda","1":1795,"2":{"0":{"0":"pats","1":1796,"type":"pvar"},"1":{"0":{"0":"body","1":1797,"type":"pvar"},"1":{"0":{"0":4919,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":1794,"type":"pcon"},"1":{"0":{"0":"foldr","1":5243,"type":"evar"},"1":{"0":{"0":{"0":"compile","1":5245,"type":"evar"},"1":{"0":{"0":"body","1":5246,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"pats","1":5247,"type":"evar"},"1":{"0":{"0":{"0":{"0":"body","1":5251,"type":"pvar"},"1":{"0":{"0":"pat","1":5252,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"++","1":1799,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"(","1":{"type":"nil"},"2":1801,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":{"0":"pat-as-arg","1":1804,"type":"evar"},"1":{"0":{"0":"pat","1":1805,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"some","1":5232,"2":{"0":{"0":"arg","1":5233,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":5231,"type":"pcon"},"1":{"0":"arg","1":5234,"type":"evar"},"type":","},"1":{"0":{"0":{"0":5235,"type":"pany"},"1":{"0":"_","1":{"type":"nil"},"2":5236,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":5229,"type":"ematch"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":") => ","1":{"type":"nil"},"2":1806,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":1800,"type":"evar"},"1":{"0":{"0":"body","1":1808,"type":"evar"},"1":{"0":{"0":"nil","1":1800,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":1800,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":5248,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"elet","1":1812,"2":{"0":{"0":"bindings","1":1813,"type":"pvar"},"1":{"0":{"0":"body","1":1815,"type":"pvar"},"1":{"0":{"0":4920,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":1811,"type":"pcon"},"1":{"0":{"0":"foldr","1":5199,"type":"evar"},"1":{"0":{"0":{"0":"compile","1":5201,"type":"evar"},"1":{"0":{"0":"body","1":5202,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"bindings","1":5203,"type":"evar"},"1":{"0":{"0":{"0":{"0":"body","1":5207,"type":"pvar"},"1":{"0":{"0":",","1":5209,"2":{"0":{"0":"pat","1":5212,"type":"pvar"},"1":{"0":{"0":"init","1":5213,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":5208,"type":"pcon"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":"((","1":{"0":{"0":{"0":{"0":{"0":"pat-as-arg","1":5216,"type":"evar"},"1":{"0":{"0":"pat","1":5220,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"some","1":5271,"2":{"0":{"0":"v","1":5272,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"3":5270,"type":"pcon"},"1":{"0":"v","1":5275,"type":"evar"},"type":","},"1":{"0":{"0":{"0":5276,"type":"pany"},"1":{"0":"_","1":{"type":"nil"},"2":5277,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":5268,"type":"ematch"},"1":") => ","2":5217,"type":",,"},"1":{"0":{"0":{"0":"body","1":5221,"type":"evar"},"1":")(","2":5222,"type":",,"},"1":{"0":{"0":{"0":{"0":"compile","1":5225,"type":"evar"},"1":{"0":{"0":"init","1":5226,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":")","2":5224,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":5214,"type":"estr"},"2":5204,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"eapp","1":1837,"2":{"0":{"0":"f","1":1838,"type":"pvar"},"1":{"0":{"0":"args","1":1839,"type":"pvar"},"1":{"0":{"0":4921,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":1836,"type":"pcon"},"1":{"0":{"0":"foldl","1":5182,"type":"evar"},"1":{"0":{"0":{"0":"with-parens","1":5171,"type":"evar"},"1":{"0":{"0":"f","1":5172,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"args","1":5183,"type":"evar"},"1":{"0":{"0":{"0":{"0":"target","1":5187,"type":"pvar"},"1":{"0":{"0":"arg","1":5188,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":"","1":{"0":{"0":{"0":"target","1":5191,"type":"evar"},"1":"(","2":5192,"type":",,"},"1":{"0":{"0":{"0":{"0":"compile","1":5195,"type":"evar"},"1":{"0":{"0":"arg","1":5196,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":")","2":5194,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":5189,"type":"estr"},"2":5184,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"ematch","1":1876,"2":{"0":{"0":"target","1":1877,"type":"pvar"},"1":{"0":{"0":"cases","1":1878,"type":"pvar"},"1":{"0":{"0":4922,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":1875,"type":"pcon"},"1":{"0":"(($target) => {","1":{"0":{"0":{"0":{"0":"join","1":4363,"type":"evar"},"1":{"0":{"0":"\\n","1":{"type":"nil"},"2":4376,"type":"estr"},"1":{"0":{"0":{"0":"map","1":4325,"type":"evar"},"1":{"0":{"0":"cases","1":4326,"type":"evar"},"1":{"0":{"0":{"0":{"0":"case","1":4338,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":{"0":{"0":",","1":4345,"2":{"0":{"0":"pat","1":4346,"type":"pvar"},"1":{"0":{"0":"body","1":4347,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":4344,"type":"pcon"},"1":{"0":"case","1":4349,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"compile-pat","1":4352,"type":"evar"},"1":{"0":{"0":"pat","1":4353,"type":"evar"},"1":{"0":{"0":"$target","1":{"type":"nil"},"2":4354,"type":"estr"},"1":{"0":{"0":"return ","1":{"0":{"0":{"0":{"0":"compile","1":4360,"type":"evar"},"1":{"0":{"0":"body","1":4361,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":"","2":4359,"type":",,"},"1":{"type":"nil"},"type":"cons"},"2":4356,"type":"estr"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"2":4340,"type":"elet"},"2":4334,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":"\\nthrow new Error('Failed to match. ' + valueToString($target))})(","2":4324,"type":",,"},"1":{"0":{"0":{"0":{"0":"compile","1":4321,"type":"evar"},"1":{"0":{"0":"target","1":4322,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":")","2":4319,"type":",,"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":4314,"type":"estr"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"type":"cons"},"2":1746,"type":"ematch"},"2":828,"type":"elambda"},"2":828,"type":"sdef"}, $env)

const with_parens = $env.evaluateStmt({"0":"with-parens","1":{"0":{"0":{"0":"expr","1":5161,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"maybe-parens","1":5164,"type":"evar"},"1":{"0":{"0":{"0":"compile","1":5176,"type":"evar"},"1":{"0":{"0":"expr","1":5177,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"needs-parens","1":5167,"type":"evar"},"1":{"0":{"0":"expr","1":5168,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"2":5155,"type":"elambda"},"2":5155,"type":"sdef"}, $env)
const compile_st = $env.evaluateStmt({"0":"compile-st","1":{"0":{"0":{"0":"stmt","1":728,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"stmt","1":731,"type":"evar"},"1":{"0":{"0":{"0":"sexpr","1":733,"2":{"0":{"0":"expr","1":734,"type":"pvar"},"1":{"0":{"0":5066,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"3":732,"type":"pcon"},"1":{"0":{"0":"compile","1":736,"type":"evar"},"1":{"0":{"0":"expr","1":737,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"sdef","1":739,"2":{"0":{"0":"name","1":740,"type":"pvar"},"1":{"0":{"0":"body","1":741,"type":"pvar"},"1":{"0":{"0":5068,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":738,"type":"pcon"},"1":{"0":{"0":"+++","1":743,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"const ","1":{"type":"nil"},"2":745,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"sanitize","1":748,"type":"evar"},"1":{"0":{"0":"name","1":749,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":" = ","1":{"type":"nil"},"2":750,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"compile","1":753,"type":"evar"},"1":{"0":{"0":"body","1":754,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":744,"type":"evar"},"1":{"0":{"0":";\\n","1":{"type":"nil"},"2":755,"type":"estr"},"1":{"0":{"0":"nil","1":744,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":744,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"0":{"0":{"0":"sdeftype","1":758,"2":{"0":{"0":"name","1":759,"type":"pvar"},"1":{"0":{"0":"cases","1":760,"type":"pvar"},"1":{"0":{"0":5069,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":757,"type":"pcon"},"1":{"0":{"0":"join","1":2190,"type":"evar"},"1":{"0":{"0":"\\n","1":{"type":"nil"},"2":2192,"type":"estr"},"1":{"0":{"0":{"0":"map","1":2198,"type":"evar"},"1":{"0":{"0":"cases","1":2200,"type":"evar"},"1":{"0":{"0":{"0":{"0":"case","1":2214,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":{"0":{"0":",,","1":2224,"2":{"0":{"0":"name2","1":2226,"type":"pvar"},"1":{"0":{"0":"args","1":2228,"type":"pvar"},"1":{"0":{"0":"loc","1":4719,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"3":2222,"type":"pcon"},"1":{"0":"case","1":2310,"type":"evar"},"type":","},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"+++","1":2234,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"const ","1":{"type":"nil"},"2":2239,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"sanitize","1":2242,"type":"evar"},"1":{"0":{"0":"name2","1":3934,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":" = ","1":{"type":"nil"},"2":2244,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"+++","1":2486,"type":"evar"},"1":{"0":{"0":{"0":"mapi","1":2392,"type":"evar"},"1":{"0":{"0":{"0":0,"1":2472,"type":"pint"},"1":2472,"type":"eprim"},"1":{"0":{"0":"args","1":2394,"type":"evar"},"1":{"0":{"0":{"0":{"0":"i","1":2474,"type":"pvar"},"1":{"0":{"0":2476,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"+++","1":2492,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"(v","1":{"type":"nil"},"2":2514,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"int-to-string","1":2517,"type":"evar"},"1":{"0":{"0":"i","1":2518,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2506,"type":"evar"},"1":{"0":{"0":") => ","1":{"type":"nil"},"2":2519,"type":"estr"},"1":{"0":{"0":"nil","1":2506,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2506,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":2396,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"({type: \\\"","1":{"type":"nil"},"2":2522,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"name2","1":2530,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":"\\\"","1":{"type":"nil"},"2":2532,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"+++","1":2548,"type":"evar"},"1":{"0":{"0":{"0":"mapi","1":2552,"type":"evar"},"1":{"0":{"0":{"0":0,"1":2554,"type":"pint"},"1":2554,"type":"eprim"},"1":{"0":{"0":"args","1":2556,"type":"evar"},"1":{"0":{"0":{"0":{"0":"i","1":2564,"type":"pvar"},"1":{"0":{"0":2566,"type":"pany"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"1":{"0":{"0":"+++","1":2570,"type":"evar"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":", ","1":{"type":"nil"},"2":2584,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":{"0":"int-to-string","1":2590,"type":"evar"},"1":{"0":{"0":"i","1":2592,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":-1,"type":"evar"},"1":{"0":{"0":": v","1":{"type":"nil"},"2":2575,"type":"estr"},"1":{"0":{"0":{"0":"cons","1":2572,"type":"evar"},"1":{"0":{"0":{"0":"int-to-string","1":2580,"type":"evar"},"1":{"0":{"0":"i","1":2582,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":"nil","1":2572,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2572,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":2558,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"0":{"0":{"0":"cons","1":2236,"type":"evar"},"1":{"0":{"0":"});","1":{"type":"nil"},"2":2594,"type":"estr"},"1":{"0":{"0":"nil","1":2236,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":2236,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":2216,"type":"elet"},"2":2202,"type":"elambda"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"type":","},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":729,"type":"ematch"},"2":638,"type":"elambda"},"2":638,"type":"sdef"}, $env)
const run = $env.evaluateStmt({"0":"run","1":{"0":{"0":{"0":"v","1":3664,"type":"pvar"},"1":{"type":"nil"},"type":"cons"},"1":{"0":{"0":"eval","1":3666,"type":"evar"},"1":{"0":{"0":{"0":"compile","1":3668,"type":"evar"},"1":{"0":{"0":"v","1":3669,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"1":{"type":"nil"},"type":"cons"},"2":-1,"type":"eapp"},"2":3658,"type":"elambda"},"2":3658,"type":"sdef"}, $env)
return $env.evaluateStmt({"0":{"0":{"0":"eval","1":4715,"type":"evar"},"1":{"0":{"0":"compile => compile_stmt => ({type:'fns',compile: a => _ => compile(a), compile_stmt: a => _ => compile_stmt(a)})","1":{"type":"nil"},"2":4077,"type":"estr"},"1":{"0":{"0":"compile","1":4716,"type":"evar"},"1":{"0":{"0":"compile-st","1":4717,"type":"evar"},"1":{"type":"nil"},"type":"cons"},"type":"cons"},"type":"cons"},"2":-1,"type":"eapp"},"1":4714,"type":"sexpr"}, $env)